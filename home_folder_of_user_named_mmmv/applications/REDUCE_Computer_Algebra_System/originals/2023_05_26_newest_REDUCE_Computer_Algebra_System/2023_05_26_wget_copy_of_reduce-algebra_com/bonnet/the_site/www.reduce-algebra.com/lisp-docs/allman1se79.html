<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Formats</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,html --> 
<meta name="src" content="allman1.tex"> 
<meta name="date" content="2014-05-02 18:10:00"> 
<link rel="stylesheet" type="text/css" href="allman1.css"> 
</head><body 
>
<p align="centre"><img src="http://www.reduce-algebra.com/lisp-docs/redlogo.png" width=621 height=60 border=0 alt="REDUCE"></p><table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li17.html#allman1se79.html" >Up</a></td><td class="clinks"><a 
href="allman1se80.html" >Next</a></td><td class="clinks"><a 
href="allman1se78.html" >Prev</a></td><td class="clinks"><a 
href="allman1se78.html#tailallman1se78.html" >PrevTail</a></td><td class="clinks"><a 
href="allman1se79.html#tailallman1se79.html">Tail</a></td></tr></table><h3 class="sectionHead"><span class="titlemark">18.3    </span> <a 
 id="x99-19700018.3"></a>Formats</h3>
<!--l. 52--><p class="noindent" >Suppose we define the following data structure (in the discussion which follows it will be
assumed that the selector functions form, root, and suffix have been defined).

<div class="verbatim" id="verbatim-367">
(NAMED-FORM&#x00A0;&#x003C;form&#x003E;&#x00A0;&#x003C;root&#x003E;&#x00A0;&#x003C;suffix&#x003E;)
</div>
<!--l. 58--><p class="nopar" >Furthermore, we would like

<div class="verbatim" id="verbatim-368">
(named-form&#x00A0;(+&#x00A0;left&#x00A0;right)&#x00A0;argument&#x00A0;1)
</div>
<!--l. 63--><p class="nopar" >to be printed in the form:

<div class="verbatim" id="verbatim-369">
argument1:&#x00A0;(+&#x00A0;left&#x00A0;right)
</div>
<!--l. 67--><p class="nopar" >The format definition which follows could be used to specify that named-forms should be
printed out in the above way. Deformat will convert everything which follows its second
argument into a formatting function. In the example below, this formatting function will be used
to format lists which have the identifer named-form as their first element. When such a list is
passed to it, the function creates a sequence of format instructions, specifying what should be
printed corresponding to the list.

<div class="verbatim" id="verbatim-370">
(deformat&#x00A0;(named-form)&#x00A0;(item)
&#x00A0;<br />&#x00A0;&#x00A0;(template&#x00A0;'({&#x00A0;&#x22C6;&#x00A0;&#x22C6;&#x00A0;":"&#x00A0;[i&#x00A0;1&#x00A0;2]&#x00A0;&#x22C6;&#x00A0;})&#x00A0;(root&#x00A0;item)
&#x00A0;<br />&#x00A0;&#x00A0;(suffix&#x00A0;item)&#x00A0;(form&#x00A0;item)))
</div>
<!--l. 82--><p class="nopar" >The function template creates a sequence of formatting instructions for its arguments based on
directions specified by the template (the first argument). The template in this example can be
understood as follows: The  and  specify that the components between them should be treated
as a single logical unit when they are printed and that an outer pair of parentheses
should be printed. The three *&#8217;s show where the three components of the data structure
should be printed. The &#8221;:&#8221; specifies that a colon should be printed after the suffix.
The vector [I 1 2] corresponds to a conditional line break. If there is sufficient room
for the form then a single space is printed (this is specified by the second element
of the vector). Otherwise a line break followed by an indentation of two spaces is
inserted.<br 
class="newline" />
<!--l. 99--><p class="noindent" >A template may consist of the following symbols:
      <ul class="itemize1">
      <li class="itemize">The prettyprinter will break onto different lines as few logical blocks as possible.
      The left angle bracket (<span 
class="cmmi-12">&#x003C;</span>),denotes the beginning of a block, the right angle bracket
      (<span 
class="cmmi-12">&#x003E;</span>), denotes the end of a block. It is assumed that these brackets balance.
      </li>
      <li class="itemize">Left and right braces ( and ) are also to define logical blocks which should be printed
      within a pair of parentheses.
      </li>
      <li class="itemize">There are two different types of blanks, the terms consistent and inconsistent are
      used to describe them. Note that blanks may only appear within a logical block. If
      each blank within a block is consistent and the block will not fit on the current line
      of output then each sub-block of the block will be placed on a new line, if each
      blank is inconsistent then new lines will be forced only when it is necessary. For
      example, the first result will occur if the blanks are inconsistent, the second if they
      are consistent.</li></ul>

<div class="verbatim" id="verbatim-371">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0; (one&#x00A0;two&#x00A0;three
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0; four)
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0; (one
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0; two
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0; three
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0; four)
</div>
<!--l. 135--><p class="nopar" >
<!--l. 137--><p class="noindent" >In general if a block will not fit on the current line of output then each consistent blank
corresponds to a new line, inconsistent blanks will print as spaces unless it is necessary to force
a new line. There is a length and an offset associated with each blank, if a blank is treated as a
space then the length represents the number of spaces which will be printed. If a blank is treated
as a break to a new line then the offset is used for indentation on the new line. Indentation is
from the horizontal position of the first character of the innermost logical block. For
example,

<div class="verbatim" id="verbatim-372">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(template&#x00A0;'({&#x00A0;&#x22C6;&#x00A0;{&#x00A0;(&#x22C6;&#x00A0;[c&#x00A0;1&#x00A0;1])&#x00A0;}&#x00A0;})
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;'(function&#x00A0;(arg-one&#x00A0;arg-two)))
</div>
<!--l. 152--><p class="nopar" >
<!--l. 154--><p class="noindent" >will result in

<div class="verbatim" id="verbatim-373">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(function&#x00A0;(arg-one
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;arg-two))
</div>
<!--l. 159--><p class="nopar" >
<!--l. 161--><p class="noindent" >assuming that it is necessary to force a line break. The consistent blank within the call the
template specifies an offset of one. The first character of the innermost logical block is the
second left parenthesis, from its position the printer indented a single space. A blank is
represented by a vector, the first entry should be either an I or C, these characters designate
the type of the blank, I for inconsistent and C for consistent. The second entry is a
positive integer which represents length, and the third is a positive integer representing
indentation. The algorithm expects to find a blank after each occurence of a right angle
bracket, if the formats which have been provided do not follow this convention then an
inconsistent blank with length and offset set to zero will be inserted after the right angle
bracket.
      <ul class="itemize1">
      <li class="itemize">An asterisk (*) is used to make a recursive call on dispatch. Dispatch is responsible
      for applying the appropriate formatting function to an expression
      </li>
      <li class="itemize">Strings, the text of the string is included in the output.
      </li>
      <li class="itemize">A sublist of format symbols may also appear within the list of format symbols. This
      list may contain blanks or asterisks and is used repetitively until a corresponding
      list of expressions is exhausted.</li></ul>

<!--l. 190--><p class="noindent" ><table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li17.html#allman1se79.html" >Up</a></td><td class="clinks"><a 
href="allman1se80.html" >Next</a></td><td class="clinks"><a 
href="allman1se78.html" >Prev</a></td><td class="clinks"><a 
href="allman1se78.html#tailallman1se78.html" >PrevTail</a></td><td class="clinks"><a 
href="allman1se79.html" >Front</a></td></tr></table><a 
 id="tailallman1se79.html"></a>  
</body></html> 
