<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Catching errors</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,html --> 
<meta name="src" content="primer.tex"> 
<meta name="date" content="2014-05-02 18:12:00"> 
<link rel="stylesheet" type="text/css" href="primer.css"> 
</head><body 
>
   <table cellspacing="5"><tr><td class="clinks"><a 
href="primerse6.html#primersu33.html" >Up</a></td><td class="clinks"><a 
href="primersu32.html" >Prev</a></td><td class="clinks"><a 
href="primersu32.html#tailprimersu32.html" >PrevTail</a></td><td class="clinks"><a 
href="primersu33.html#tailprimersu33.html">Tail</a></td></tr></table><h4 class="subsectionHead"><span class="titlemark">6.2   </span> <a 
 id="x54-500006.2"></a>Catching errors</h4>
<!--l. 2110--><p class="noindent" >On the other hand a symbolic program might want to react to an exception
which occurred in a calculation branch. <span 
class="cmr-10">REDUCE </span>supports this by encapsulation
with the routines <span 
class="cmtt-10x-x-109">errorset*</span><a 
 id="dx54-50001"></a> and <span 
class="cmtt-10x-x-109">errorset</span> <a 
 id="dx54-50002"></a>. You have to construct the action to
be encapsulated as a subroutine call in prefix LISP syntax which is identical to
algebraic form syntax: a list where the first element is the name of the function
(usually a quoted symbol) followed by the arguments; these must be tagged by
quote, best using the function <span 
class="cmtt-10x-x-109">mkquote</span><a 
 id="dx54-50003"></a>. The second parameter describes the error
mode: if <span 
class="cmmi-10x-x-109">t</span>, an eventual error during the evaluation will be reported to the
user, if <span 
class="cmmi-10x-x-109">nil </span>the error message will be suppressed. <span 
class="cmtt-10x-x-109">errorset </span>additionally
has a third parameter which tells the error manager whether to print
a backtrace or not in an error case. The result of these functions will
be
     <ul class="itemize1">
     <li class="itemize">in the case of an error an error code (its form depends on the underlying
     LISP system),
     </li>
     <li class="itemize">otherwise the result of the computed value as <span 
class="cmtt-10x-x-109">car </span>of a list.</li></ul>
<!--l. 2133--><p class="noindent" >You should use the function <span 
class="cmtt-10x-x-109">errorp</span><a 
 id="dx54-50004"></a> for testing whether the call failed or not; in the
positive case pick out the result by a <span 
class="cmmi-10x-x-109">car </span>access. Example:
                                                                     

                                                                     
   <div class="verbatim" id="verbatim-62">
&#x00A0;&#x00A0;begin&#x00A0;scalar&#x00A0;u,v;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;.&#x00A0;&#x00A0;.&#x00A0;&#x00A0;.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;q&#x00A0;:=&#x00A0;errorset!*({&#8217;quotsq,mkquote(u),mkquote(v)},nil);
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;if&#x00A0;errorp&#x00A0;q&#x00A0;then&#x00A0;rederr&#x00A0;"division&#x00A0;failed"&#x00A0;else
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;q:=car&#x00A0;q;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;.&#x00A0;&#x00A0;.&#x00A0;&#x00A0;.
</div>
<!--l. 2144--><p class="nopar" > Note that you cannot write the expression to be encapsulated in <span 
class="cmr-10">REDUCE</span>
syntax here. And also <span 
class="cmsy-10x-x-109">&#x2032;</span>(<span 
class="cmmi-10x-x-109">quotsq u v</span>) would be incorrect because then <span 
class="cmmi-10x-x-109">u </span>and <span 
class="cmmi-10x-x-109">v</span>
were constants and not references to the local variables <span 
class="cmmi-10x-x-109">u </span>and <span 
class="cmmi-10x-x-109">v</span>. Only the
<span 
class="cmmi-10x-x-109">mkquote </span>expressions guarantee that at run time a list is generated where the
values of <span 
class="cmmi-10x-x-109">u </span>and <span 
class="cmmi-10x-x-109">v </span>are inserted as parameters for the call. <table cellspacing="5"><tr><td class="clinks"><a 
href="primerse6.html#primersu33.html" >Up</a></td><td class="clinks"><a 
href="primersu32.html" >Prev</a></td><td class="clinks"><a 
href="primersu32.html#tailprimersu32.html" >PrevTail</a></td><td class="clinks"><a 
href="primersu33.html" >Front</a></td></tr></table><a 
 id="tailprimersu33.html"></a>
 
</body></html> 
