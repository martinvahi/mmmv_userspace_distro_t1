<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Differences between Compiled and Interpreted Code</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,html --> 
<meta name="src" content="allman1.tex"> 
<meta name="date" content="2014-05-02 18:10:00"> 
<link rel="stylesheet" type="text/css" href="allman1.css"> 
</head><body 
>
<p align="centre"><img src="https://reduce-algebra.sourceforge.io/lisp-docs/redlogo.png" width=621 height=60 border=0 alt="REDUCE"></p><table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li14.html#allman1se63.html" >Up</a></td><td class="clinks"><a 
href="allman1se64.html" >Next</a></td><td class="clinks"><a 
href="allman1se62.html" >Prev</a></td><td class="clinks"><a 
href="allman1se62.html#tailallman1se62.html" >PrevTail</a></td><td class="clinks"><a 
href="allman1se63.html#tailallman1se63.html">Tail</a></td></tr></table><h3 class="sectionHead"><span class="titlemark">15.5    </span> <a 
 id="x80-16500015.5"></a>Differences between Compiled and Interpreted Code</h3>
<!--l. 232--><p class="noindent" >In the process of compilation, many functions are Open-Coded, and hence cannot be redefined
or traced in the compiled code. Such functions are noted to be Open-Coded in the
manual. The call on the function is replaced by a sequence of instructions which make
up the body of the function. This trick gives faster execution, but it requires more
space. A call on a macro is another instance of open coding. A PSL program usually
consists of a large number of relatively small functions. Calling a function requires
manipulation of a parameter stack for variable binding and a control stack for return
information. The time spent inside a function may be small compared to the time spent
maintaining the stacks. Some commonly used PSL functions which are open-coded
are and, or, apply, idapply, codeapply, return, go, cons, cond, case, prog, progn, and
prog2.
<!--l. 247--><p class="noindent" >Unless variables are declared, or detected, to be fluid or global they are compiled as local
variables. This causes their names to disappear, and so they are not visible on the binding stack.
In addition these variables will not be available to functions called in the dynamic scope of the
function containing their binding.
<!--l. 254--><p class="noindent" >The compiler attempts to do the following conversions<br 
class="newline" />
<div class="tabular"><table id="TBL-15" class="tabular" 
cellspacing="0" cellpadding="0"  
><colgroup id="TBL-15-1g"><col 
id="TBL-15-1"><col 
id="TBL-15-2"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-15-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-15-1-1"  
class="td11">(function (lambda ...)) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;</span></td><td  style="white-space:wrap; text-align:left;" id="TBL-15-1-2"  
class="td11"><!--l. 259--><p class="noindent" >the lambda expression is compiled into a gensymed
name. If the functional form of one of the mapping
functions (map, mapc, maplist, mapcar, mapcon, and
mapcan) is explicitly tagged function then the call is
open coded.                                                                  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-15-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-15-2-1"  
class="td11">(setq na va nb vb ...) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;   </span></td><td  style="white-space:wrap; text-align:left;" id="TBL-15-2-2"  
class="td11"><!--l. 265--><p class="noindent" >(setq na va), (setq nb vb) ...                                          </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-15-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-15-3-1"  
class="td11">(nth sequence n) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;      </span></td><td  style="white-space:wrap; text-align:left;" id="TBL-15-3-2"  
class="td11"><!--l. 267--><p class="noindent" >(car sequence) if n = 1,                                                </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-15-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-15-4-1"  
class="td11">                   </td><td  style="white-space:wrap; text-align:left;" id="TBL-15-4-2"  
class="td11"><!--l. 268--><p class="noindent" >(cadr sequence) if n = 2,                                              </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-15-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-15-5-1"  
class="td11">                   </td><td  style="white-space:wrap; text-align:left;" id="TBL-15-5-2"  
class="td11"><!--l. 269--><p class="noindent" >(caddr sequence) if n = 3,                                            </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-15-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-15-6-1"  
class="td11">                   </td><td  style="white-space:wrap; text-align:left;" id="TBL-15-6-2"  
class="td11"><!--l. 270--><p class="noindent" >(cadddr sequence) if n = 4                                           </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-15-7-"><td  style="white-space:nowrap; text-align:left;" id="TBL-15-7-1"  
class="td11">(pnth sequence n) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;     </span></td><td  style="white-space:wrap; text-align:left;" id="TBL-15-7-2"  
class="td11"><!--l. 272--><p class="noindent" >(identity sequence) if n = 1,                                         </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-15-8-"><td  style="white-space:nowrap; text-align:left;" id="TBL-15-8-1"  
class="td11">                   </td><td  style="white-space:wrap; text-align:left;" id="TBL-15-8-2"  
class="td11"><!--l. 273--><p class="noindent" >(cdr sequence) if n = 2,                                                </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-15-9-"><td  style="white-space:nowrap; text-align:left;" id="TBL-15-9-1"  
class="td11">                   </td><td  style="white-space:wrap; text-align:left;" id="TBL-15-9-2"  
class="td11"><!--l. 274--><p class="noindent" >(cddr sequence) if n = 3,                                              </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-15-10-"><td  style="white-space:nowrap; text-align:left;" id="TBL-15-10-1"  
class="td11">                   </td><td  style="white-space:wrap; text-align:left;" id="TBL-15-10-2"  
class="td11"><!--l. 275--><p class="noindent" >(cdddr sequence) if n = 4,                                            </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-15-11-"><td  style="white-space:nowrap; text-align:left;" id="TBL-15-11-1"  
class="td11">                   </td><td  style="white-space:wrap; text-align:left;" id="TBL-15-11-2"  
class="td11"><!--l. 276--><p class="noindent" >(cddddr sequence) if n = 5                                           </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-15-12-"><td  style="white-space:nowrap; text-align:left;" id="TBL-15-12-1"  
class="td11">                   </td></tr></table></div>
<!--l. 279--><p class="noindent" >The following transformations are made when the list function is applied to less than six
arguments. When there are more that five arguments the compiler uses the cons expansion for
additional arguments.<br 
class="newline" />

<div class="tabular"><table id="TBL-16" class="tabular" 
cellspacing="0" cellpadding="0"  
><colgroup id="TBL-16-1g"><col 
id="TBL-16-1"><col 
id="TBL-16-2"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-16-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-16-1-1"  
class="td11">(list a) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;                  </span></td><td  style="white-space:wrap; text-align:left;" id="TBL-16-1-2"  
class="td11"><!--l. 285--><p class="noindent" >(ncons a)                                          </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-16-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-16-2-1"  
class="td11">(list a b) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;                 </span></td><td  style="white-space:wrap; text-align:left;" id="TBL-16-2-2"  
class="td11"><!--l. 286--><p class="noindent" >(list2 a b)                                          </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-16-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-16-3-1"  
class="td11">(list a b c) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;               </span></td><td  style="white-space:wrap; text-align:left;" id="TBL-16-3-2"  
class="td11"><!--l. 287--><p class="noindent" >(list3 a b c)                                       </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-16-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-16-4-1"  
class="td11">(list a b c d) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;             </span></td><td  style="white-space:wrap; text-align:left;" id="TBL-16-4-2"  
class="td11"><!--l. 288--><p class="noindent" >(list4 a b c d)                                    </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-16-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-16-5-1"  
class="td11">(list a b c d e) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;           </span></td><td  style="white-space:wrap; text-align:left;" id="TBL-16-5-2"  
class="td11"><!--l. 289--><p class="noindent" >(list5 a b c d e)                                 </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-16-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-16-6-1"  
class="td11">(apply (function foo) ...) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;</span></td><td  style="white-space:wrap; text-align:left;" id="TBL-16-6-2"  
class="td11"><!--l. 291--><p class="noindent" >(foo ...)                                             </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-16-7-"><td  style="white-space:nowrap; text-align:left;" id="TBL-16-7-1"  
class="td11">(assoc ...) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;               </span></td><td  style="white-space:wrap; text-align:left;" id="TBL-16-7-2"  
class="td11"><!--l. 293--><p class="noindent" >(atsoc ...)                                          </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-16-8-"><td  style="white-space:nowrap; text-align:left;" id="TBL-16-8-1"  
class="td11">                    </td></tr></table></div>
<!--l. 296--><p class="noindent" >If the last clause within a cond expression is not of the
<!--l. 298--><p class="noindent" >form (t ...) then the compiler will add the additinal clause (t nil).<br 
class="newline" />
<div class="tabular"><table id="TBL-17" class="tabular" 
cellspacing="0" cellpadding="0"  
><colgroup id="TBL-17-1g"><col 
id="TBL-17-1"><col 
id="TBL-17-2"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-17-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-17-1-1"  
class="td11">(difference n 1) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;      </span></td><td  style="white-space:wrap; text-align:left;" id="TBL-17-1-2"  
class="td11"><!--l. 302--><p class="noindent" >(sub1 n)                                            </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-17-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-17-2-1"  
class="td11">(equal ...) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;             </span></td><td  style="white-space:wrap; text-align:left;" id="TBL-17-2-2"  
class="td11"><!--l. 304--><p class="noindent" >(eq ...)                                              </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-17-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-17-3-1"  
class="td11">(geq ...) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;              </span></td><td  style="white-space:wrap; text-align:left;" id="TBL-17-3-2"  
class="td11"><!--l. 306--><p class="noindent" >(not (lessp ...))                                 </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-17-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-17-4-1"  
class="td11">(intern (compress ...)) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;</span></td><td  style="white-space:wrap; text-align:left;" id="TBL-17-4-2"  
class="td11"><!--l. 308--><p class="noindent" >(implode ...)                                     </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-17-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-17-5-1"  
class="td11">(intern (gensym ...)) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;  </span></td><td  style="white-space:wrap; text-align:left;" id="TBL-17-5-2"  
class="td11"><!--l. 310--><p class="noindent" >(interngensym ...)                            </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-17-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-17-6-1"  
class="td11">(leq ...) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;               </span></td><td  style="white-space:wrap; text-align:left;" id="TBL-17-6-2"  
class="td11"><!--l. 312--><p class="noindent" >(not (greaterp ...))                            </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-17-7-"><td  style="white-space:nowrap; text-align:left;" id="TBL-17-7-1"  
class="td11">(lessp n 0) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;            </span></td><td  style="white-space:wrap; text-align:left;" id="TBL-17-7-2"  
class="td11"><!--l. 314--><p class="noindent" >(minusp n)                                       </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-17-8-"><td  style="white-space:nowrap; text-align:left;" id="TBL-17-8-1"  
class="td11">(member ...) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;          </span></td><td  style="white-space:wrap; text-align:left;" id="TBL-17-8-2"  
class="td11"><!--l. 316--><p class="noindent" >(memq ...)                                        </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-17-9-"><td  style="white-space:nowrap; text-align:left;" id="TBL-17-9-1"  
class="td11">(neq ...) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;              </span></td><td  style="white-space:wrap; text-align:left;" id="TBL-17-9-2"  
class="td11"><!--l. 318--><p class="noindent" >(not (equal ...))                                 </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-17-10-"><td  style="white-space:nowrap; text-align:left;" id="TBL-17-10-1"  
class="td11">(not ...) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;               </span></td><td  style="white-space:wrap; text-align:left;" id="TBL-17-10-2"  
class="td11"><!--l. 320--><p class="noindent" >(null ...)                                            </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-17-11-"><td  style="white-space:nowrap; text-align:left;" id="TBL-17-11-1"  
class="td11">(plus2 n 1) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;           </span></td><td  style="white-space:wrap; text-align:left;" id="TBL-17-11-2"  
class="td11"><!--l. 322--><p class="noindent" >(add1 n)                                           </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-17-12-"><td  style="white-space:nowrap; text-align:left;" id="TBL-17-12-1"  
class="td11">(null (eq ...)) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;         </span></td><td  style="white-space:wrap; text-align:left;" id="TBL-17-12-2"  
class="td11"><!--l. 324--><p class="noindent" >(neq ...)                                            </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-17-13-"><td  style="white-space:nowrap; text-align:left;" id="TBL-17-13-1"  
class="td11">(null (atom ...)) <span 
class="cmsy-10x-x-120">- </span><span 
class="cmmi-12">&#x003E;       </span></td><td  style="white-space:wrap; text-align:left;" id="TBL-17-13-2"  
class="td11"><!--l. 326--><p class="noindent" >(pairp ...)                                          </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-17-14-"><td  style="white-space:nowrap; text-align:left;" id="TBL-17-14-1"  
class="td11">                  </td></tr></table></div>
<!--l. 331--><p class="noindent" >Prior to the application of some functions, such as car and cdr, there is no verification that the
types of the arguments are correct.
<!--l. 335--><p class="noindent" >Since compiled calls on macros, fexprs, and nexprs are different from the default exprs, these
functions must be defined, or declared, before compiling the code that uses them. While fexprs
and nexprs may be subsequently redefined, as new functions of the same type, macros are
executed by the compiler to get the replacement form, which is then compiled. The interpreter
would pick up the most recent definition of any function, and so functions can switch type as
well as body.
<!--l. 344--><p class="noindent" >Constants which appear in code that is to be compiled may be collapsed. For example, the
following code references two distinct strings which happen to contain the same characters. The
compiled code will only reference one string.

<div class="verbatim" id="verbatim-347">
&#x00A0;&#x00A0;(de&#x00A0;fubar&#x00A0;()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;(let&#x00A0;((this&#x00A0;"foo")
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(that&#x00A0;"foo"))
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;(eq&#x00A0;this&#x00A0;that))
&#x00A0;<br />
&#x00A0;<br />1&#x00A0;lisp&#x003E;&#x00A0;(foo)
&#x00A0;<br />nil
&#x00A0;<br />2&#x00A0;lisp&#x003E;&#x00A0;(compile&#x00A0;'(foo))
&#x00A0;<br />nil
&#x00A0;<br />3&#x00A0;lisp&#x003E;&#x00A0;(foo)
&#x00A0;<br />t
</div>
<!--l. 361--><p class="nopar" >As noted below, the switches *r2i and *nolinke may cause function calls to be replaced by
jumps. This means that the backtrace of compiled functions may differ from that of interpreted
functions. In addition a sequence of interpreted function calls could consume stack space while
compiled function calls might not.

<!--l. 370--><p class="noindent" ><table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li14.html#allman1se63.html" >Up</a></td><td class="clinks"><a 
href="allman1se64.html" >Next</a></td><td class="clinks"><a 
href="allman1se62.html" >Prev</a></td><td class="clinks"><a 
href="allman1se62.html#tailallman1se62.html" >PrevTail</a></td><td class="clinks"><a 
href="allman1se63.html" >Front</a></td></tr></table><a 
 id="tailallman1se63.html"></a>  
</body></html> 
