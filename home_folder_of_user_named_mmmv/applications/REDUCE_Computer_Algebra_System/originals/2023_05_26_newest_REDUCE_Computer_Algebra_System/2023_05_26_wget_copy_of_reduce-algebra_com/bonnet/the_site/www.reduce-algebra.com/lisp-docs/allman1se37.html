<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>File System Interface: Open and Close</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,html --> 
<meta name="src" content="allman1.tex"> 
<meta name="date" content="2014-05-02 18:10:00"> 
<link rel="stylesheet" type="text/css" href="allman1.css"> 
</head><body 
>
<p align="centre"><img src="http://www.reduce-algebra.com/lisp-docs/redlogo.png" width=621 height=60 border=0 alt="REDUCE"></p><table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li9.html#allman1se37.html" >Up</a></td><td class="clinks"><a 
href="allman1se38.html" >Next</a></td><td class="clinks"><a 
href="allman1se36.html" >Prev</a></td><td class="clinks"><a 
href="allman1se36.html#tailallman1se36.html" >PrevTail</a></td><td class="clinks"><a 
href="allman1se37.html#tailallman1se37.html">Tail</a></td></tr></table><h3 class="sectionHead"><span class="titlemark">10.5    </span> <a 
 id="x49-12800010.5"></a>File System Interface: Open and Close</h3>
<!--l. 758--><p class="noindent" ><div class="minipage"><a 
 id="dx49-128001"></a>
<span 
class="ptmb7t-x-x-120">(open </span><span 
class="ptmr7t-x-x-109">FILENAME:string ACCESSTYPE:id): CHANNEL:io-channel                                    </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">If  AccessType  is  eq  to  input  or  output,  an  attempt  is  made  to  access
the system-dependent FILENAME for reading or writing. If the attempt is
unsuccessful, an error is generated; otherwise a free channel is returned and
initialized to the default conditions for ordinary file input or output.</div>
</div>
<!--l. 760--><p class="noindent" >If none of these conditions hold, a file is not available, or there are no free channels, an error is
generated.

<div class="verbatim" id="verbatim-301">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x22C6;&#x22C6;&#x22C6;&#x22C6;&#x22C6;&#x00A0;Unknown&#x00A0;access&#x00A0;type
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x22C6;&#x22C6;&#x22C6;&#x22C6;&#x22C6;&#x00A0;Improperly&#x00A0;set-up&#x00A0;special&#x00A0;IO&#x00A0;open&#x00A0;call
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x22C6;&#x22C6;&#x22C6;&#x22C6;&#x22C6;&#x00A0;File&#x00A0;not&#x00A0;found
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x22C6;&#x22C6;&#x22C6;&#x22C6;&#x22C6;&#x00A0;No&#x00A0;free&#x00A0;channels
</div>
<!--l. 768--><p class="nopar" >If AccessType is eq to SPECIAL, no file is opened. Instead the channel is initialized as a
generalized input and/or output stream. See below.
<!--l. 776--><p class="noindent" ><div class="minipage"><a 
 id="dx49-128002"></a>
<span 
class="ptmb7t-x-x-120">(filep NAME:string): boolean                                                                                     </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">This function will return t if file NAME can be opened, and nil if not, e.g.
if it does not exist.</div></div>
<!--l. 785--><p class="noindent" ><div class="minipage"><a 
 id="dx49-128003"></a>
<span 
class="ptmb7t-x-x-120">(close CHANNEL:io-channel): io-channel                                                                </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">The   closing   function   associated   with   CHANNEL   is   called,   with
CHANNEL  as  its  argument.  If  it  is  illegal  to  close  CHANNEL,  if
CHANNEL is not open, or if CHANNEL is associated with a file and the
file  cannot  be  closed  by  the  operating  system,  this  function  generates  an
error. Otherwise, CHANNEL is marked as free and is returned.</div>
</div>
<!--l. 787--><p class="noindent" >Here is a simple example of input from a particular file with output sent to the current output
channel. This function reads forms from the file MYFILE.DAT and prints out all those whose
car is eq to its parameter. Using unwind-protect, we are assured that the channel (and the file),
will be closed in all cases, including errors.

<div class="verbatim" id="verbatim-302">
&#x00A0;&#x00A0;(de&#x00A0;filter-my-file&#x00A0;(x)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;(let&#x00A0;((chan&#x00A0;(open&#x00A0;"MYFILE.DAT"&#x00A0;'input))
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;form)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(unwind-protect
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(while&#x00A0;(neq&#x00A0;(setq&#x00A0;form&#x00A0;(channelread&#x00A0;chan))
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$eof$)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(if&#x00A0;(and&#x00A0;(pairp&#x00A0;form)&#x00A0;(eq&#x00A0;(car&#x00A0;form)&#x00A0;x))
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(print&#x00A0;form)))
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(close&#x00A0;chan))))
</div>
<!--l. 804--><p class="nopar" >

<!--l. 806--><p class="noindent" ><table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li9.html#allman1se37.html" >Up</a></td><td class="clinks"><a 
href="allman1se38.html" >Next</a></td><td class="clinks"><a 
href="allman1se36.html" >Prev</a></td><td class="clinks"><a 
href="allman1se36.html#tailallman1se36.html" >PrevTail</a></td><td class="clinks"><a 
href="allman1se37.html" >Front</a></td></tr></table><a 
 id="tailallman1se37.html"></a>  
</body></html> 
