<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Modes, function classes</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,html --> 
<meta name="src" content="primer.tex"> 
<meta name="date" content="2014-05-02 18:12:00"> 
<link rel="stylesheet" type="text/css" href="primer.css"> 
</head><body 
>
   <table cellspacing="5"><tr><td class="clinks"><a 
href="primerse2.html#primersu2.html" >Up</a></td><td class="clinks"><a 
href="primersu3.html" >Next</a></td><td class="clinks"><a 
href="primersu1.html" >Prev</a></td><td class="clinks"><a 
href="primersu1.html#tailprimersu1.html" >PrevTail</a></td><td class="clinks"><a 
href="primersu2.html#tailprimersu2.html">Tail</a></td></tr></table><h4 class="subsectionHead"><span class="titlemark">2.2   </span> <a 
 id="x5-40002.2"></a>Modes, function classes</h4>
<!--l. 127--><p class="noindent" >The symbols <span 
class="cmtt-10x-x-109">symbolic </span>(or equivalent <span 
class="cmtt-10x-x-109">lisp</span>) <a 
 id="dx5-4001"></a><a 
 id="dx5-4002"></a> and <span 
class="cmtt-10x-x-109">algebraic</span> <a 
 id="dx5-4003"></a>play a double role:
as a statement they switch the evaluation mode globally to <span 
class="cmti-10x-x-109">symbolic </span>or <span 
class="cmti-10x-x-109">algebraic</span>
<span 
class="cmti-10x-x-109">mode </span>respectively, as a <span 
class="cmti-10x-x-109">mode prefix</span> <a 
 id="dx5-4004"></a>they tell the <span 
class="cmr-10">REDUCE </span>evaluator that one
isolated evaluation should be done in the named mode. The scope of this prefix
use can be rather narrow (e.g.&#x00A0;one single expression) or cover a larger piece
of code up to a complete procedure. Typically procedures in symbolic
modules should be tagged &#8220;symbolic&#8221; explicitly although this might be
redundant information in a totally symbolic context. If a procedure needs an
evaluation mode different from the actual global one the <span 
class="cmti-10x-x-109">mode prefix </span>must be
set.
<!--l. 144--><p class="indent" >   In symbolic mode there are two additional procedure types available, <span 
class="cmtt-10x-x-109">macro</span>
<a 
 id="dx5-4005"></a>and <span 
class="cmtt-10x-x-109">smacro</span><a 
 id="dx5-4006"></a>. The discussion of <span 
class="cmtt-10x-x-109">macro</span>s is beyond the scope of this document
- their use requires extensive knowledge of LISP. On the other hand
<span 
class="cmtt-10x-x-109">smacro</span>s are frequently use in <span 
class="cmr-10">REDUCE </span>and you will see lots of them in the
sources. An <span 
class="cmtt-10x-x-109">smacro </span>(an abbreviation for &#8220;substitution macro&#8221;) is an
ordinary procedure tagged with the symbol &#8220;smacro&#8221; and usually with a
rather small body. At source read time (or better: at <span 
class="cmr-10">REDUCE </span>translator
time) any call for an <span 
class="cmtt-10x-x-109">smacro </span>will be replaced literally by the body of the
<span 
class="cmtt-10x-x-109">smacro </span>procedure which saves execution time for the call protocol at run
time. So the purpose of <span 
class="cmtt-10x-x-109">smacro</span>s is twofold: encapsulation of frequently
used pieces of code and an increased efficiency (avoiding function calls).
Example:
                                                                     

                                                                     
   <div class="verbatim" id="verbatim-1">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;smacro&#x00A0;procedure&#x00A0;my_diff(x,y);&#x00A0;x-y;
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;symbolic&#x00A0;procedure&#x00A0;hugo(a,b);&#x00A0;my_diff(a,b);
</div>
<!--l. 165--><p class="nopar" > Here the formal function call <span 
class="cmti-10x-x-109">my</span><span 
class="cmti-10x-x-109">_diff </span>in the procedure literally is replaced by the
body of the <span 
class="cmtt-10x-x-109">smacro </span>where <span 
class="cmmi-10x-x-109">x </span>and <span 
class="cmmi-10x-x-109">y </span>are replaced by <span 
class="cmmi-10x-x-109">a </span>and <span 
class="cmmi-10x-x-109">b</span>. Obviously this
translation can be done only if the <span 
class="cmtt-10x-x-109">smacro </span>declaration is entered in a <span 
class="cmr-10">REDUCE</span>
session before the first reference. And later changes of an <span 
class="cmtt-10x-x-109">smacro </span>don&#8217;t affect
previously translated references.
<!--l. 175--><p class="indent" >   Sometimes in older <span 
class="cmr-10">REDUCE </span>sources you will find the symbol <span 
class="cmtt-10x-x-109">expr</span><a 
 id="dx5-4007"></a> in front of
a procedure declaration. This is more or less useless as the absence of <span 
class="cmtt-10x-x-109">macro </span>or
<span 
class="cmtt-10x-x-109">smacro </span>symbols indicates that a procedure is of type <span 
class="cmtt-10x-x-109">expr </span>- the default Standard
LISP procedure type.
                                                                     

                                                                     
<!--l. 182--><p class="indent" >   <table cellspacing="5"><tr><td class="clinks"><a 
href="primerse2.html#primersu2.html" >Up</a></td><td class="clinks"><a 
href="primersu3.html" >Next</a></td><td class="clinks"><a 
href="primersu1.html" >Prev</a></td><td class="clinks"><a 
href="primersu1.html#tailprimersu1.html" >PrevTail</a></td><td class="clinks"><a 
href="primersu2.html" >Front</a></td></tr></table><a 
 id="tailprimersu2.html"></a>  
</body></html> 
