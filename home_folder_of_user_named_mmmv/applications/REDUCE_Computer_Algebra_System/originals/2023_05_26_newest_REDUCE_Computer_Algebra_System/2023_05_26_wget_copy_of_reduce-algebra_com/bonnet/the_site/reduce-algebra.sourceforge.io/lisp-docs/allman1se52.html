<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Break Loop</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,html --> 
<meta name="src" content="allman1.tex"> 
<meta name="date" content="2014-05-02 18:10:00"> 
<link rel="stylesheet" type="text/css" href="allman1.css"> 
</head><body 
>
<p align="centre"><img src="https://reduce-algebra.sourceforge.io/lisp-docs/redlogo.png" width=621 height=60 border=0 alt="REDUCE"></p><table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li11.html#allman1se52.html" >Up</a></td><td class="clinks"><a 
href="allman1se53.html" >Next</a></td><td class="clinks"><a 
href="allman1se51.html" >Prev</a></td><td class="clinks"><a 
href="allman1se51.html#tailallman1se51.html" >PrevTail</a></td><td class="clinks"><a 
href="allman1se52.html#tailallman1se52.html">Tail</a></td></tr></table><h3 class="sectionHead"><span class="titlemark">12.4    </span> <a 
 id="x66-14600012.4"></a>Break Loop</h3>
<!--l. 202--><p class="noindent" >On detecting an error, PSL normally enters a read/eval/print loop called a break loop. Here the
user can examine the state of his computation, change the values of fluid and global variables, or
define missing functions. He can then dismiss the error call to the normal error handling
mechanism (errorset or errset above). If the error was of the continuable type, he may continue
the computation. By setting the switch *break to nil, all break loops can be suppressed, and
just an error message is displayed. Suppressing error messages also suppresses break
loops.
<!--l. 217--><p class="noindent" ><div class="minipage"><a 
 id="dx66-146001"></a>
<span 
class="ptmb7t-x-x-120">*break </span>= [Initially: t]                                                                                                 <span 
class="ptmri7t-x-x-120">switch</span>
<br 
class="newline" />&#x00A0;       &#x00A0;<div class="minipage">Controls whether the break package is called before unwinding the stack on
error.</div></div>
<!--l. 222--><p class="noindent" ><div class="minipage"><a 
 id="dx66-146002"></a>
<span 
class="ptmb7t-x-x-120">breaklevel* </span>= [Initially: 0]                                                                                         <span 
class="ptmri7t-x-x-120">global</span>
<br 
class="newline" />&#x00A0;       &#x00A0;<div class="minipage">The current number of nesting level of breaks.
</div></div>
<!--l. 231--><p class="noindent" ><div class="minipage"><a 
 id="dx66-146003"></a>
<span 
class="ptmb7t-x-x-120">maxbreaklevel* </span>= [Initially: 5]                                                                                 <span 
class="ptmri7t-x-x-120">global</span>
<br 
class="newline" />&#x00A0;       &#x00A0;<div class="minipage">The  maximum  number  of  nesting  levels  of  breaks  permitted.  If  an  error
occurs with at least this number of nested breaks already existing, no entry
to an interactive break loop is made. Control aborts back to the innermost
error handler instead.</div></div>
<!--l. 234--><p class="noindent" >The prompt <span 
class="pcrr7t-x-x-120">"lisp break&#x003E;" </span>indicates that PSL has entered a break loop. A message of the
form &#8221;Retry form is ...&#8221; may also be printed, in which case the user is able to continue his
computation by repairing the offending expression. By default, a break loop uses the
functions read, eval, and print. This may be changed by setting <span 
class="pcrr7t-x-x-120">breakreader&#x22C6;,</span>
<span 
class="pcrr7t-x-x-120">breakevaluator&#x22C6;, or breakprinter&#x22C6; </span>to the appropriate function name.

<!--l. 248--><p class="noindent" ><div class="minipage"><a 
 id="dx66-146004"></a>
<span 
class="ptmb7t-x-x-120">errorform* </span>= [Initially: nil]                                                                                       <span 
class="ptmri7t-x-x-120">global</span>
<br 
class="newline" />&#x00A0;       &#x00A0;<div class="minipage">Contains  an  expression  to  reevaluate  inside  a  break  loop  for  continuable
errors. Used as a tag for various Error functions.</div>
</div>
<!--l. 251--><p class="noindent" >Several ids, if typed at top-level, are special in a break loop. These are used as commands, and
are currently M, R, T, Q, A, I, and C. They call functions stored on their property lists
under the indicator breakfunction. These ids are special only at top-level, and do not
cause any difficulty if used as variables inside expressions. However, they may not
be simply typed at top-level to see their values. This is not expected to cause any
difficulty.<br 
class="newline" />
<!--l. 260--><p class="noindent" >The meanings of these commands are:<br 
class="newline" />
<div class="tabular"><table id="TBL-14" class="tabular" 
cellspacing="0" cellpadding="0"  
><colgroup id="TBL-14-1g"><col 
id="TBL-14-1"><col 
id="TBL-14-2"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-14-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-14-1-1"  
class="td11">M</td><td  style="white-space:wrap; text-align:left;" id="TBL-14-1-2"  
class="td11"><!--l. 264--><p class="noindent" >Display errorform*, this command calls the function breakerrmsg.                           </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-14-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-14-2-1"  
class="td11">R  </td><td  style="white-space:wrap; text-align:left;" id="TBL-14-2-2"  
class="td11"><!--l. 267--><p class="noindent" >Retry.  This  tries  to  evaluate  the  retry  form,  and  continue  the  computation.  It
evaluates  the  value  of  errorform*.  This  is  often  useful  after  defining  a  missing
function  or  assigning  a  value  to  a  variable.  This  command  calls  the  function
breakretry.                                                                                                                    </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-14-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-14-3-1"  
class="td11">C  </td><td  style="white-space:wrap; text-align:left;" id="TBL-14-3-2"  
class="td11"><!--l. 273--><p class="noindent" >Continue. This causes the expression last printed by the break loop to be returned as
the value of the call on continuableerror. This is often useful as an automatic stub. If
an expression containing an undefined function is evaluated, a break loop is entered,
and this may be used to return the value of the function call. This command calls
the function breakcontinue.                                                                                         </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-14-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-14-4-1"  
class="td11">Q  </td><td  style="white-space:wrap; text-align:left;" id="TBL-14-4-2"  
class="td11"><!--l. 282--><p class="noindent" >Quit. This exits the break loop by throwing to the closest surrounding error handler.
It calls the function breakquit.                                                                                     </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-14-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-14-5-1"  
class="td11">A  </td><td  style="white-space:wrap; text-align:left;" id="TBL-14-5-2"  
class="td11"><!--l. 286--><p class="noindent" >Abort. This aborts to the top level, i.e., restarts PSL. It calls the function reset.        </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-14-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-14-6-1"  
class="td11">T  </td><td  style="white-space:wrap; text-align:left;" id="TBL-14-6-2"  
class="td11"><!--l. 289--><p class="noindent" >Trace. This prints a backtrace of function calls on the stack except for those on the
lists ignoredinbacktrace* and interpreterfunctions*. It calls the function backtrace. </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-14-7-"><td  style="white-space:nowrap; text-align:left;" id="TBL-14-7-1"  
class="td11">I   </td><td  style="white-space:wrap; text-align:left;" id="TBL-14-7-2"  
class="td11"><!--l. 294--><p class="noindent" >Interpreter  Trace.  This  prints  a  backtrace  of  only  interpreted  functions  call  on
the  stack  except  for  those  on  the  list  interpreterfunctions*.  It  calls  the  function
interpbacktrace.                                                                                                           </td>
</tr></table></div>
<!--l. 301--><p class="noindent" >An attempt to continue a non-continuable error with R or C prints a message and behaves as
Q.
<!--l. 309--><p class="noindent" ><div class="minipage"><a 
 id="dx66-146005"></a>
<span 
class="ptmb7t-x-x-120">ignoredinbacktrace* </span>= [Initially: string]                                                                  <span 
class="ptmri7t-x-x-120">global</span>
<br 
class="newline" />&#x00A0;       &#x00A0;<div class="minipage">A list of function names that will not be printed by the commands I and
T given within a break loop (eval apply fastapply codeapply codeevalapply
catch errorset evprogn toploop breakeval bindeval break main).</div>
</div>

<!--l. 317--><p class="noindent" ><div class="minipage"><a 
 id="dx66-146006"></a>
<span 
class="ptmb7t-x-x-120">interpreterfunctions* </span>= [Initially: string]                                                                 <span 
class="ptmri7t-x-x-120">global</span>
<br 
class="newline" />&#x00A0;       &#x00A0;<div class="minipage">A list of function names that will not be printed by the command I given
within a break loop (cond prog and or progn setq).</div>
</div>
<!--l. 320--><p class="noindent" >The above two globals can be reset in an init file if the programmer desires to do
so.

<div class="verbatim" id="verbatim-323">
(de&#x00A0;new-nth&#x00A0;(seq&#x00A0;index)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;(cond&#x00A0;((onep&#x00A0;index)&#x00A0;(car&#x00A0;x))
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(t&#x00A0;(new-nth&#x00A0;(rest&#x00A0;index)&#x00A0;(sub1&#x00A0;index)))))
&#x00A0;<br />
&#x00A0;<br />1&#x00A0;lisp&#x003E;&#x00A0;(new-nth&#x00A0;'(a&#x00A0;b&#x00A0;c)&#x00A0;2)
&#x00A0;<br />&#x22C6;&#x22C6;&#x22C6;&#x22C6;&#x22C6;&#x00A0;&#8216;S'&#x00A0;is&#x00A0;an&#x00A0;unbound&#x00A0;ID
&#x00A0;<br />&#x22C6;&#x22C6;&#x22C6;&#x22C6;&#x22C6;&#x00A0;Continuable&#x00A0;error:&#x00A0;retry&#x00A0;form&#x00A0;is&#x00A0;&#8216;S'
&#x00A0;<br />2&#x00A0;lisp&#x00A0;break&#x00A0;(1)&#x003E;&#x00A0;t
&#x00A0;<br />Backtrace&#x00A0;from&#x00A0;top&#x00A0;of&#x00A0;stack:
&#x00A0;<br />car&#x00A0;new-nth&#x00A0;new-nth
&#x00A0;<br />NIL
&#x00A0;<br />3&#x00A0;lisp&#x00A0;break&#x00A0;(1)&#x003E;&#x00A0;seq
&#x00A0;<br />(b&#x00A0;c)
&#x00A0;<br />4&#x00A0;lisp&#x00A0;break&#x00A0;(1)&#x003E;&#x00A0;c
&#x00A0;<br />b
</div>
<!--l. 338--><p class="nopar" >

<!--l. 340--><p class="noindent" ><table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li11.html#allman1se52.html" >Up</a></td><td class="clinks"><a 
href="allman1se53.html" >Next</a></td><td class="clinks"><a 
href="allman1se51.html" >Prev</a></td><td class="clinks"><a 
href="allman1se51.html#tailallman1se51.html" >PrevTail</a></td><td class="clinks"><a 
href="allman1se52.html" >Front</a></td></tr></table><a 
 id="tailallman1se52.html"></a>  
</body></html> 
