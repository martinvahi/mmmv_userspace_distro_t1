<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>The Basic Error Functions</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,html --> 
<meta name="src" content="allman1.tex"> 
<meta name="date" content="2014-05-02 18:10:00"> 
<link rel="stylesheet" type="text/css" href="allman1.css"> 
</head><body 
>
<p align="centre"><img src="https://reduce-algebra.sourceforge.io/lisp-docs/redlogo.png" width=621 height=60 border=0 alt="REDUCE"></p><table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li11.html#allman1se50.html" >Up</a></td><td class="clinks"><a 
href="allman1se51.html" >Next</a></td><td class="clinks"><a 
href="allman1se49.html" >Prev</a></td><td class="clinks"><a 
href="allman1se49.html#tailallman1se49.html" >PrevTail</a></td><td class="clinks"><a 
href="allman1se50.html#tailallman1se50.html">Tail</a></td></tr></table><h3 class="sectionHead"><span class="titlemark">12.2    </span> <a 
 id="x64-14400012.2"></a>The Basic Error Functions</h3>
<!--l. 30--><p class="noindent" ><div class="minipage"><a 
 id="dx64-144001"></a>
<span 
class="ptmb7t-x-x-120">(error NUMBER: integer MESSAGE:any): None Returned                                  </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">Under  the  initial  (and  usual)  values  of  a  couple  of  switches,  the  error
message  is  printed  and  an  interactive  break  loop  (see  below)  is  entered.
If the user &#8221;quits&#8221; out of the interactive break loop, control returns to the
innermost error handler.</div></div>
<!--l. 32--><p class="noindent" >The user may supply an error handler. The interactive break loop and the top level loop also
supply error handlers, so if the user makes no special preparation, control will return to an
existing break loop or to the top level of PSL.
<!--l. 38--><p class="noindent" >Whenever a call on error results in return to an error handler, the error number of the error
becomes the value returned by the error handler. Fluid variables and local bindings are unbound
to return to the environment of the error handler. Global variables are not affected by the
process. The error message is printed with 5 leading asterisks on both the standard output
device and the currently selected output device unless the standard output device is
not open. If the message is a list it is displayed without top level parentheses. The
message from the error call is available for later examination in the global variable
<span 
class="pcrr7t-x-x-120">emsg&#x22C6;</span>.
<!--l. 51--><p class="noindent" >Note: the exact format of error messages generated by PSL functions described in this
document may not be exactly as given and should not be relied upon to be in any
particular form. Likewise, error numbers generated by PSL functions are not fixed.
Currently, a number of different calls on error result in the same error message and
number.
<!--l. 67--><p class="noindent" ><div class="minipage"><a 
 id="dx64-144002"></a>
<span 
class="ptmb7t-x-x-120">(continuableerror NUMBER:integer MESSAGE:any</span><br 
class="newline" /><span 
class="ptmb7t-x-x-120">FORM: form): any                                                                                                      </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" />&#x00A0;      <div class="minipage">Similar  to  error.  If  an  interactive  break  is  entered  due  to  a  call  on
continuableerror,  the  user  has  options  of  &#8221;continuing&#8221;  or  &#8221;retrying&#8221;  (see
information  on  the  break  loop,  below).  In  either  of  these  cases  the  call
on  continuableerror  returns.  The  value  returned  is  as  described  in  the
documentation of the interactive break loop.</div>
</div>
<!--l. 69--><p class="noindent" >The FORM argument is used for &#8221;retrying&#8221; after a continuable error. The FORM is generally
made to look like a call on the function that signalled the error (actual argument values filled in),
and the function signalling the error generally returns with the value returned by the call on
continuableerror. For example the call on conterror, in the example below is equivalent to the
following call on continuableerror:

<div class="verbatim" id="verbatim-320">
(continuableerror&#x00A0;99&#x00A0;"Attempt&#x00A0;to&#x00A0;divide&#x00A0;by&#x00A0;0&#x00A0;in&#x00A0;DIVIDE"
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(list&#x00A0;'divide&#x00A0;(mkquote&#x00A0;u)&#x00A0;(mkquote&#x00A0;v)))
</div>
<!--l. 80--><p class="nopar" >The FORM argument may be nil. In this case it is expected that the break will be left via
&#8221;continue&#8221; rather than &#8221;retry&#8221;.
<!--l. 85--><p class="noindent" >As in the example above, setting up the errorform* can get a bit tricky, often involving
mkquoteing of already evaluated arguments. The following macro may be useful.
<!--l. 92--><p class="noindent" ><div class="minipage"><a 
 id="dx64-144003"></a>
<span 
class="ptmb7t-x-x-120">(conterror [ARGS:any]): any                                                                                  </span><span 
class="ptmri7t-x-x-120">macro</span>
<br 
class="newline" /><div class="minipage">The format of ARGS is <br 
class="newline" /><span 
class="pcrr7t-x-x-120">(errornumber formatstring </span><span 
class="cmsy-10x-x-120">{</span><span 
class="pcrr7t-x-x-120">arguments to printf</span><span 
class="cmsy-10x-x-120">}</span>
<span 
class="pcrr7t-x-x-120">reevalform).</span></div>
</div>The FORMATSTRING is used with the following arguments in a call on bldmsg to build an
error message. If the only argument to printf is a string, the FORMATSTRING may be omitted,
and no call to bldmsg is made. REEVALFORM is something like <span 
class="pcrr7t-x-x-120">(foo x y) </span>which
becomes <span 
class="pcrr7t-x-x-120">(list 'foo (mkquote x) (mkquote y)) </span>to be passed to the function
continuableerror.

<div class="verbatim" id="verbatim-321">
(de&#x00A0;divide&#x00A0;(u&#x00A0;v)
&#x00A0;<br />&#x00A0;&#x00A0;(cond&#x00A0;((zerop&#x00A0;v)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(conterror&#x00A0;99
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;"Attempt&#x00A0;to&#x00A0;divide&#x00A0;by&#x00A0;0&#x00A0;in&#x00A0;DIVIDE"
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(divide&#x00A0;u&#x00A0;v)))
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(t&#x00A0;(cons&#x00A0;(quotient&#x00A0;u&#x00A0;v)&#x00A0;(remainder&#x00A0;u&#x00A0;v)))
&#x00A0;<br />&#x00A0;))
</div>
<!--l. 111--><p class="nopar" >
<!--l. 116--><p class="noindent" ><div class="minipage"><a 
 id="dx64-144004"></a>
<span 
class="ptmb7t-x-x-120">(fatalerror S:any): None Returned                                                                             </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">This  function  allows  neither  continuation  nor  even  a  return  to  any  error
handler.</div></div>

<div class="verbatim" id="verbatim-322">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;(de&#x00A0;fatalerror&#x00A0;(s)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(errorprintf&#x00A0;"&#x22C6;&#x22C6;&#x22C6;&#x22C6;&#x22C6;&#x00A0;Fatal&#x00A0;error:&#x00A0;%S"&#x00A0;s)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(while&#x00A0;t&#x00A0;(quit))
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;nil)
</div>
<!--l. 122--><p class="nopar" >

<!--l. 124--><p class="noindent" ><table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li11.html#allman1se50.html" >Up</a></td><td class="clinks"><a 
href="allman1se51.html" >Next</a></td><td class="clinks"><a 
href="allman1se49.html" >Prev</a></td><td class="clinks"><a 
href="allman1se49.html#tailallman1se49.html" >PrevTail</a></td><td class="clinks"><a 
href="allman1se50.html" >Front</a></td></tr></table><a 
 id="tailallman1se50.html"></a>  
</body></html> 
