<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Fluid and Global Declarations</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,html --> 
<meta name="src" content="allman1.tex"> 
<meta name="date" content="2014-05-02 18:10:00"> 
<link rel="stylesheet" type="text/css" href="allman1.css"> 
</head><body 
>
<p align="centre"><img src="https://reduce-algebra.sourceforge.io/lisp-docs/redlogo.png" width=621 height=60 border=0 alt="REDUCE"></p><table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li14.html#allman1se65.html" >Up</a></td><td class="clinks"><a 
href="allman1se66.html" >Next</a></td><td class="clinks"><a 
href="allman1se64.html" >Prev</a></td><td class="clinks"><a 
href="allman1se64.html#tailallman1se64.html" >PrevTail</a></td><td class="clinks"><a 
href="allman1se65.html#tailallman1se65.html">Tail</a></td></tr></table><h3 class="sectionHead"><span class="titlemark">15.7    </span> <a 
 id="x82-16700015.7"></a>Fluid and Global Declarations</h3>
<!--l. 476--><p class="noindent" >Fluid and global declarations must be used to indicate variables that are to be used as non-local
variables in compiled code. The values associated with local variables are stored on
a stack. If a variable has been declared global or fluid then the compiled code will
instead access the value cell of that variable. In addition the content of the value cells of
special variables being used as formal parameters must be preserved. The compiler
currently defaults variables bound in a particular function to local. Note that local
variables exist as anonymous stack locations, therefore called functions cannot see
them. An undeclared non-local variable is declared fluid by the compiler with the
warning:

<div class="verbatim" id="verbatim-350">
&#x22C6;&#x22C6;&#x22C6;&#x00A0;NAME&#x00A0;declared&#x00A0;fluid
</div>
<!--l. 491--><p class="nopar" >The appearance of this message may indicate an additional error. If a previous function used
this name in the parameter list then it may have to be recompiled. The local variable in the
previous function will not refer to the same variable as the one recently declared fluid, even
though the names are the same in the source code listing.
<!--l. 499--><p class="noindent" >Previous documentation has given users the impression that it is illegal to bind an id which has
been declared global. This is not true, an attempt to bind a global variable will cause the
following message to be displayed.

<div class="verbatim" id="verbatim-351">
&#x22C6;&#x22C6;&#x22C6;&#x00A0;Illegal&#x00A0;to&#x00A0;bind&#x00A0;global&#x00A0;VARIABLE&#x00A0;but&#x00A0;binding&#x00A0;anyway
</div>
<!--l. 506--><p class="nopar" >The lack of distinction between global and fluid in PSL appears to be due to the fact that
shallow binding is employed in PSL. In a deep bound system one has to search down a binding
stack to locate the value of a fluid id, which could get expensive. A global declaration within a
deep bound system would allow the interpreter to assume that the value of an id is in a fixed
location. Of course in a shallow bound system the value of a id is always found in the value cell
of that id.

<!--l. 516--><p class="noindent" ><table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li14.html#allman1se65.html" >Up</a></td><td class="clinks"><a 
href="allman1se66.html" >Next</a></td><td class="clinks"><a 
href="allman1se64.html" >Prev</a></td><td class="clinks"><a 
href="allman1se64.html#tailallman1se64.html" >PrevTail</a></td><td class="clinks"><a 
href="allman1se65.html" >Front</a></td></tr></table><a 
 id="tailallman1se65.html"></a>  
</body></html> 
