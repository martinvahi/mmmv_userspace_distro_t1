<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This manual is for REDUCE IDE (version 1.10, updated
Time-stamp: <2022-12-14 15:40:10 franc>), which provides GNU Emacs major modes for editing and
running REDUCE source code.

Copyright (C) 1994, 1996, 1999, 2012, 2017-2018, 2022 Francis J. Wright

This manual and the software that it describes are subject to the GNU
General Public License that is distributed with GNU Emacs - see the
file COPYING.

Permission is granted to make and distribute verbatim copies of this
manual provided the copyright notice and this permission notice are
preserved on all copies.

Permission is granted to copy and distribute modified versions of this
manual under the conditions for verbatim copying and provided that the
entire resulting derived work is distributed under the terms of a
permission notice identical to this one.

Permission is granted to copy and distribute translations of this manual
into another language, under the above conditions for modified
versions. -->
<title>Indentation (GNU Emacs REDUCE Integrated Development Environment)</title>

<meta name="description" content="Indentation (GNU Emacs REDUCE Integrated Development Environment)">
<meta name="keywords" content="Indentation (GNU Emacs REDUCE Integrated Development Environment)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Command-Index.html" rel="index" title="Command Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index.html" rel="up" title="Top">
<link href="Structures.html" rel="next" title="Structures">
<link href="Comments.html" rel="prev" title="Comments">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<div class="chapter" id="Indentation">
<div class="header">
<p>
Next: <a href="Structures.html" accesskey="n" rel="next">Templates for REDUCE structures</a>, Previous: <a href="Comments.html" accesskey="p" rel="prev">Support for REDUCE comments</a>, Up: <a href="index.html" accesskey="u" rel="up">REDUCE Integrated Development Environment</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Command-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Indenting-REDUCE-code-automatically"></span><h2 class="chapter">7 Indenting REDUCE code automatically</h2>
<span id="index-Indentation"></span>

<p>Indentation refers to the white space at the left of a line, which
therefore determines the column in which the actual text of the line
begins.  Indentation is used in normal English text to indicate the
beginning of paragraphs, quotations, lists, etc. and hence to indicate
the logical structure of a document.
</p>
<p>It is very important to use systematic indentation to indicate the
logical structure of the source code of a computer program.  Whilst the
general principles of indentation are largely agreed, precise
indentation conventions vary from author to author.  The automatic
indentation currently provided by REDUCE mode is very inflexible and
reflects very much my own style of indentation.  Future versions may
provide more flexible and customizable indentation.
</p>
<p>Currently all indentation is done in steps consisting of a fixed
number of spaces determined by the value of the variable
<code>reduce-indentation</code>, the default value of which is 3;
<a href="Customization.html">Customization of REDUCE IDE</a>.  This is the
indentation recommended by A.&nbsp;C.&nbsp;Hearn (the principal author of
REDUCE) for the indentation of the first line after a procedure
(header) statement.
</p>
<p>REDUCE mode provides fairly intelligent automatic indentation.  The
style used is as follows, where the indentation of a child statement is
expressed relative to the parent statement.  Each top-level statement is
indented to the left margin.  Procedure bodies are indented by one step.
Bodies of multi-line compound and group statements are indented by one
step and labels are exdented to match the beginning of the enclosing
block.  Lines that begin with <code>end</code> or <code>&gt;&gt;</code> are exdented to
match the line containing the matching <code>begin</code> or <code>&lt;&lt;</code>.
Bodies of control structures and lines that continue a previous
statement are indented by one step.  As parts of larger statements,
compound and group statements themselves are generally not indented if
they occupy multiple lines (because their bodies are indented) but they
are indented if they occupy only a single line.
</p>
<p>When a new line that is inserted is being indented, the indentation
can be based only on the preceding code, and not on the code that will
appear in the line.  Therefore, it is often necessary to re-indent a
line in order to get consistent indentation.  This may seem a little
strange, but it is unavoidable given the syntax of REDUCE and the
indentation style that I have chosen.  It is for this reason that the
key <kbd>C-j</kbd> runs the command
<code>reindent-then-newline-and-indent</code> rather than just
<code>newline-and-indent</code>.
</p>
<p>The command to indent, or re-indent, a line of text is
<code>reduce-indent-line</code>, normally bound (indirectly) to the key
<kbd><span class="key">TAB</span></kbd>.  The execution of <code>reduce-indent-line</code> is
independent of the position of point within the line.  It does not
move point relative to the text around it unless point was within the
indentation, in which case it is left before the first non-blank
character (i.e. at the end of the indentation), or at the end of the
line if it contains only white space.  Normally, however, the most
convenient way to use automatic indentation is to terminate each line
of code with <kbd>C-j</kbd> rather than <kbd><span class="key">RET</span></kbd>.
See <a href="Miscellaneous.html">Miscellaneous minor features</a>.
</p>
<p>When called with any argument, which is possible only via the direct
key binding <kbd>M-i</kbd>, <code>reduce-indent-line</code> will indent the
current line correctly and then re-indent the rest of the logical
statement containing point by the same amount that the current line
was re-indented.  This is <em>not</em> the same as correctly
re-indenting the subsequent lines &ndash; it re-indents them rigidly,
without changing their relative indentations at all, and is much
faster.
</p>
<dl compact="compact">
<dt id='index-TAB-1'><span><kbd>TAB</kbd><a href='Indentation.html#index-TAB-1' class='copiable-anchor'> &para;</a></span></dt>
<dt id='index-reduce_002dindent_002dline'><span><kbd>M-i</kbd><a href='Indentation.html#index-reduce_002dindent_002dline' class='copiable-anchor'> &para;</a></span></dt>
<dd><span id="index-M_002di"></span>
</dd>
<dt><span><kbd>M-x reduce-indent-line</kbd></span></dt>
<dd><p>Indent or re-indent the current line as REDUCE code.  Indents to a
fixed style determined by the current and previous non-blank lines.
With an interactive argument, indent any additional lines of the same
statement rigidly together with this one.
</p>
</dd>
<dt id='index-reindent_002dthen_002dnewline_002dand_002dindent'><span><kbd>C-j</kbd><a href='Indentation.html#index-reindent_002dthen_002dnewline_002dand_002dindent' class='copiable-anchor'> &para;</a></span></dt>
<dd><span id="index-C_002dj"></span>
</dd>
<dt><span><kbd>M-x reindent-then-newline-and-indent</kbd></span></dt>
<dd><p>Re-indent the current line, insert a newline, then indent the new line.
Indentation of both lines is done using <code>reduce-indent-line</code>, which
is bound by default to <kbd>TAB</kbd>.
</p></dd>
</dl>

<p>With the current indentation style, it is not possible in all cases to
determine the correct indentation until after some text has been
entered on a line.  This applies to the terminal delimiter of a block
<code>end</code> or group <code>&gt;&gt;</code> when it appears alone on a line and to
an <code>else</code> clause.  Therefore, REDUCE mode can automatically
re-indent the current line once there is enough text to recognise that
this is necessary.  It does this only when it is otherwise idle and
only when the relevant text has just been typed.  It is not done if
the cursor is later moved onto such a line since it is assumed that
the desired indentation has been set by then.  (The indentation of any
text can, of course, be changed at any time, but it will never be
automatically changed retrospectively!)  This facility is turned on
and off by the command <code>reduce-auto-indent-mode</code>, the length of
idle time required before the facility will operate is controlled by
the option <code>reduce-auto-indent-delay</code>, and whether the current
line is auto-indented by this facility is controlled by the regular
expression that is the value of the option
<code>reduce-auto-indent-regexp</code>.  Auto-indentation is on by default.
See <a href="Customization.html">Customization of the REDUCE IDE</a>.
</p>
<dl compact="compact">
<dt id='index-reduce_002dauto_002dindent_002dmode'><span><kbd>M-x reduce-auto-indent-mode</kbd><a href='Indentation.html#index-reduce_002dauto_002dindent_002dmode' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Toggle REDUCE Auto Indent mode.  With a prefix argument, turn the mode
on if and only if the argument is positive.  When REDUCE Auto Indent
mode is enabled, after <code>reduce-auto-indent-delay</code> seconds of Emacs
idle time re-indent the current line if the text just typed matches
<code>reduce-auto-indent-regexp</code>.
</p></dd>
</dl>

<p>A section of code can be re-indented using one command if it is first
marked as the current region, or the whole buffer or a complete
procedure definition can be re-indented by a single command.  The
latter command works by marking the procedure and then re-indenting
the region.  Region (and hence procedure) indenting is currently
implemented inefficiently by applying the single-line indentation
algorithm line-by-line, and hence is very slow for a large region or
procedure.  In some future version it may be re-implemented more
efficiently.
</p>
<dl compact="compact">
<dt id='index-reduce_002dindent_002dregion'><span><kbd>C-M-\</kbd><a href='Indentation.html#index-reduce_002dindent_002dregion' class='copiable-anchor'> &para;</a></span></dt>
<dd><span id="index-C_002dM_002d_005c"></span>
</dd>
<dt><span><kbd>M-x reduce-indent-region</kbd></span></dt>
<dd><p>Indent or re-indent the region as REDUCE source code by applying
<code>reduce-indent-line</code> to each line.  With a prefix argument it
indents the whole buffer.
</p>
</dd>
<dt id='index-reduce_002dindent_002dprocedure-1'><span><kbd>C-M-q</kbd><a href='Indentation.html#index-reduce_002dindent_002dprocedure-1' class='copiable-anchor'> &para;</a></span></dt>
<dd><span id="index-C_002dM_002dq-1"></span>
</dd>
<dt><span><kbd>M-x reduce-indent-procedure</kbd></span></dt>
<dd><p>Indent or re-indent the procedure (and trailing white space) ending
after point by applying <code>reduce-indent-line</code> to each line.
</p></dd>
</dl>

<p>The command <code>reduce-indent-line-always</code>, bound to
<kbd>C-<span class="key">TAB</span></kbd>, is analogous to <code>reduce-indent-line</code> but
always indents by precisely one additional step consisting of
<code>reduce-indentation</code> spaces.  With an argument, it rigidly
indents by one step the current line and the rest of the logical
statement.
</p>
<p>The command <code>reduce-unindent-line</code>, bound to <kbd>S-<span class="key">TAB</span></kbd>
(i.e. <kbd><span class="key">BACKTAB</span></kbd>), is an inverse of
<code>reduce-indent-line-always</code> and decreases the indentation by one
step.  With an argument, it rigidly unindents by one step the current
line and the rest of the logical statement.
</p>
<dl compact="compact">
<dt id='index-reduce_002dindent_002dline_002dalways'><span><kbd>C-TAB</kbd><a href='Indentation.html#index-reduce_002dindent_002dline_002dalways' class='copiable-anchor'> &para;</a></span></dt>
<dd><span id="index-C_002dTAB"></span>
</dd>
<dt><span><kbd>M-x reduce-indent-line-always</kbd></span></dt>
<dd><p>Indent the current line as REDUCE code by adding
<code>reduce-indentation</code> spaces at the beginning of the line.  With
an interactive argument, indent any additional lines of the same
statement rigidly along with this one.
</p>
</dd>
<dt id='index-BACKTAB'><span><kbd>BACKTAB</kbd><a href='Indentation.html#index-BACKTAB' class='copiable-anchor'> &para;</a></span></dt>
<dt id='index-reduce_002dunindent_002dline'><span><kbd>S-TAB</kbd><a href='Indentation.html#index-reduce_002dunindent_002dline' class='copiable-anchor'> &para;</a></span></dt>
<dd><span id="index-S_002dTAB"></span>
</dd>
<dt><span><kbd>M-x reduce-unindent-line</kbd></span></dt>
<dd><p>Unindent the current line as REDUCE code by deleting
<code>reduce-indentation</code> spaces (or as many as possible) from the
beginning of the line.  With an interactive argument, unindent any
additional lines of the same statement rigidly along with this one.
</p></dd>
</dl>


</div>
<hr>
<div class="header">
<p>
Next: <a href="Structures.html">Templates for REDUCE structures</a>, Previous: <a href="Comments.html">Support for REDUCE comments</a>, Up: <a href="index.html">REDUCE Integrated Development Environment</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Command-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
