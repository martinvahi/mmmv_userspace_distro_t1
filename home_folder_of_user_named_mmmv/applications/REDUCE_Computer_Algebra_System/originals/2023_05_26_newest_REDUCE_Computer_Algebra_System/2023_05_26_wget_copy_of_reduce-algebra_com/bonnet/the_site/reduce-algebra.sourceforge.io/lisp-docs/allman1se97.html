<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>New unexec procedure, Image model</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,html --> 
<meta name="src" content="allman1.tex"> 
<meta name="date" content="2014-05-02 18:10:00"> 
<link rel="stylesheet" type="text/css" href="allman1.css"> 
</head><body 
>
<p align="centre"><img src="https://reduce-algebra.sourceforge.io/lisp-docs/redlogo.png" width=621 height=60 border=0 alt="REDUCE"></p><table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li25.html#allman1se97.html" >Up</a></td><td class="clinks"><a 
href="allman1se98.html" >Next</a></td><td class="clinks"><a 
href="allman1se96.html" >Prev</a></td><td class="clinks"><a 
href="allman1se96.html#tailallman1se96.html" >PrevTail</a></td><td class="clinks"><a 
href="allman1se97.html#tailallman1se97.html">Tail</a></td></tr></table><h3 class="sectionHead"><span class="titlemark">26.2    </span> <a 
 id="x125-25000026.2"></a>New unexec procedure, Image model</h3>
<!--l. 211--><p class="noindent" >PSL&#8217;s former unexec model (Savesystem) was to produce executables in the sense of the
operating system (mostly a.out files). This has led into maintainance problems with various new
file formats (e.g. ELF, COFF) and dynamic loading. Influenced by the model developed for the
PSL on Personal Computers, for all new PSL versions for new architectures the so
called <span 
class="ptmb7t-x-x-120">image model </span>is used. This simply means that the command <span 
class="pcrr7t-x-x-120">savesystem</span>
does not write an executable file but it puts all the LISP data into a file such that the
information can be reloaded afterwards. The reload is done by the program <span 
class="pcrr7t-x-x-120">$pxk/bpsl</span>
when the -f parameter is used. The dumpfiles names get the suffix <span 
class="pcrr7t-x-x-120">.img</span>, e.g. the
command

<div class="verbatim" id="verbatim-434">
(savesystem&#x00A0;"Banner"&#x00A0;"dir/file"&#x00A0;initform)
</div>
<!--l. 226--><p class="nopar" >
<!--l. 228--><p class="noindent" >produces a file <span 
class="pcrr7t-x-x-120">dir/file.img </span>which can be restarted by issueing the command

<div class="verbatim" id="verbatim-435">
$pxk/bpsl&#x00A0;-f&#x00A0;dir/file.img
</div>
<!--l. 233--><p class="nopar" >
<!--l. 235--><p class="noindent" >The LISP data written to the file are: <span 
class="pcrr7t-x-x-120">SYMVAL, SYMPRP, SYMFNC, SYMNAM and</span>
<span 
class="pcrr7t-x-x-120">SYMGET, hashtable </span>and the allocated parts of <span 
class="pcrr7t-x-x-120">bps and heap. </span>This reduces the amount
of disk storage used drastically.
<!--l. 240--><p class="noindent" >To insure proper reloading, the program bpsl can be used for reloading of images only if these
were written from its own core image. A check for this is provided using a datetag scheme
which must be the same in bpsl and image file. The error message <span 
class="ptmb7t-x-x-120">Cant start image with this</span>
<span 
class="ptmb7t-x-x-120">bpsl </span>means that the check was not successful and you have to produce a new image file. This
normally happens when the file bpsl is rebuild.
<!--l. 248--><p class="noindent" >In very rare cases after dramatic changes in the environment (generally speaking), you may get
the message <span 
class="ptmb7t-x-x-120">Cant relocate the image</span>. In this case, please try to rebuild the images. If this fails
(it should not), please try

<div class="verbatim" id="verbatim-436">
$pxk/bpsl&#x00A0;-f&#x00A0;dir/file.img&#x00A0;-g&#x00A0;1000000
</div>
<!--l. 255--><p class="nopar" >
<!--l. 257--><p class="noindent" >If this works properly, you may try to reduce the g value. In any case please send a note the the
author of this document.

<!--l. 264--><p class="noindent" ><table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li25.html#allman1se97.html" >Up</a></td><td class="clinks"><a 
href="allman1se98.html" >Next</a></td><td class="clinks"><a 
href="allman1se96.html" >Prev</a></td><td class="clinks"><a 
href="allman1se96.html#tailallman1se96.html" >PrevTail</a></td><td class="clinks"><a 
href="allman1se97.html" >Front</a></td></tr></table><a 
 id="tailallman1se97.html"></a>  
</body></html> 
