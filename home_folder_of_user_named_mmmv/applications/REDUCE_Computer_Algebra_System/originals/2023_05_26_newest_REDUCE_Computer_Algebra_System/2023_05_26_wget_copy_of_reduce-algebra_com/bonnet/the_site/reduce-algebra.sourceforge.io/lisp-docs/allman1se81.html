<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Specifying Formats</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,html --> 
<meta name="src" content="allman1.tex"> 
<meta name="date" content="2014-05-02 18:10:00"> 
<link rel="stylesheet" type="text/css" href="allman1.css"> 
</head><body 
>
<p align="centre"><img src="https://reduce-algebra.sourceforge.io/lisp-docs/redlogo.png" width=621 height=60 border=0 alt="REDUCE"></p><table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li17.html#allman1se81.html" >Up</a></td><td class="clinks"><a 
href="allman1se80.html" >Prev</a></td><td class="clinks"><a 
href="allman1se80.html#tailallman1se80.html" >PrevTail</a></td><td class="clinks"><a 
href="allman1se81.html#tailallman1se81.html">Tail</a></td></tr></table><h3 class="sectionHead"><span class="titlemark">18.5    </span> <a 
 id="x101-19900018.5"></a>Specifying Formats</h3>
<!--l. 251--><p class="noindent" ><div class="minipage"><a 
 id="dx101-199001"></a>
<span 
class="ptmb7t-x-x-120">(deformat NAME:pair PARAM:id-list [BODY:forms]): nil                                   </span><span 
class="ptmri7t-x-x-120">fexpr</span>
<br 
class="newline" /><div class="minipage">Deformat is used to define format functions for PSL expressions. The car of
NAME should be a list of identifiers (it may also be a single identifier), the
cdr should be nil for atomic expressions or an integer representing a minimal
length for lists. PARAM is a list containing a single id, when the format
function is used PARAM will be bound to the expression being formatted.
Formats are defined by calls on template (described below).</div>
</div>
<!--l. 259--><p class="noindent" ><div class="minipage"><a 
 id="dx101-199002"></a>
<span 
class="ptmb7t-x-x-120">(template FORMAT:list [COMPONENT:form]): any                                          </span><span 
class="ptmri7t-x-x-120">macro</span>
<br 
class="newline" /><div class="minipage">FORMAT   is   a   list   of   format   symbols   (described   above).   Each
COMPONENT should correspond to a call on dispatch (*), in FORMAT. If
a sub-list of format symbols in included within FORMAT then there must
be a corresponding list of components.</div>
</div>
<!--l. 261--><p class="noindent" >This first example illustrates a format for quoted expressions. For example, &#8217;ANY
instead of (QUOTE ANY). A minimal length of two is given, since the list (QUOTE)
should not be printed as &#8217;. The argument to quote is formatted by a separate call on
dispatch.

<div class="verbatim" id="verbatim-375">
(deformat&#x00A0;(quote&#x00A0;.&#x00A0;2)&#x00A0;(item)
&#x00A0;<br />&#x00A0;&#x00A0;(template&#x00A0;'("'"&#x00A0;&#x22C6;)&#x00A0;(second&#x00A0;item)))
</div>
<!--l. 270--><p class="nopar" >The elements of a vector should be enclosed within square brackets. Since the length of vectors
will vary a list of format symbols is supplied to be used repetitively for each element. This list
will be matched against a corresponding list of components, (vector2list item). Each element is
formatted by a recursive call on dispatch. Elements are separated by inconsistent blanks,
therefore if the entire vector does not fit on a single line the ouput will be something
like

<div class="verbatim" id="verbatim-376">
[one&#x00A0;two&#x00A0;three
&#x00A0;<br />&#x00A0;four]
&#x00A0;<br />
&#x00A0;<br />(deformat&#x00A0;(vector)&#x00A0;(item)
&#x00A0;<br />&#x00A0;&#x00A0;(template&#x00A0;'(&#x003C;&#x00A0;"["&#x00A0;(&#x22C6;&#x00A0;[i&#x00A0;1&#x00A0;1])&#x00A0;"]"&#x00A0;&#x003E;)&#x00A0;(vector2list&#x00A0;item)))
</div>
<!--l. 285--><p class="nopar" >Given the expression (setq n-one v-one n-two v-two)

<div class="verbatim" id="verbatim-377">
(setq&#x00A0;n-one&#x00A0;v-one
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;n-two&#x00A0;v-two)
</div>
<!--l. 291--><p class="nopar" >is preferred over

<div class="verbatim" id="verbatim-378">
(setq&#x00A0;n-one&#x00A0;v-one&#x00A0;n-two
&#x00A0;<br />&#x00A0;v-two)
</div>
<!--l. 297--><p class="nopar" >The following can be used to obtain the preferred output.

<div class="verbatim" id="verbatim-379">
(deformat&#x00A0;((set&#x00A0;setq)&#x00A0;.&#x00A0;3)&#x00A0;(item)
&#x00A0;<br />&#x00A0;&#x00A0;(template&#x00A0;'({&#x00A0;&#x22C6;&#x00A0;"&#x00A0;"&#x00A0;&#x003C;&#x00A0;(&#x22C6;&#x00A0;[i&#x00A0;1&#x00A0;1]&#x00A0;&#x22C6;&#x00A0;[c&#x00A0;1&#x00A0;0])&#x00A0;&#x003E;&#x00A0;})
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(first&#x00A0;item)&#x00A0;(rest&#x00A0;item)))
</div>
<!--l. 304--><p class="nopar" >The first form of ouput is obtained by using inconsistent blanks after the names (n-one and
n-two) and consistent blanks after the values (v-one and v-two). When this expression will not fit
on a single line the consistent blanks will correspond to line breaks and unless a value is too
large to fit on an output line, the inconsistent blanks will correspond to spaces. The zero offset
associated with the consistent blanks corresponds to the block of names and values. This is why
the names line up within a column. If the inner logical brackets were omitted the output would
look something like

<div class="verbatim" id="verbatim-380">
(setq&#x00A0;n-one&#x00A0;v-one
&#x00A0;<br />&#x00A0;n-two&#x00A0;v-two)
</div>
<!--l. 319--><p class="nopar" >assuming that the expression would not fit on a single line. Notice that the format for a single
pair (name and value) is used repetitively.
<!--l. 324--><p class="noindent" >A format function may contain more than one call on template. The two functions below are
equivalent.

<div class="verbatim" id="verbatim-381">
(deformat&#x00A0;(lambda&#x00A0;.&#x00A0;3)&#x00A0;(item)
&#x00A0;<br />&#x00A0;&#x00A0;(template&#x00A0;'({&#x00A0;&#x22C6;&#x00A0;[i&#x00A0;1&#x00A0;1])&#x00A0;(first&#x00A0;item))
&#x00A0;<br />&#x00A0;&#x00A0;(if&#x00A0;(null&#x00A0;(second&#x00A0;item))
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;(template&#x00A0;'("()"&#x00A0;[c&#x00A0;1&#x00A0;1]&#x00A0;(&#x22C6;&#x00A0;[c&#x00A0;1&#x00A0;1])&#x00A0;})
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(rest&#x00A0;(rest&#x00A0;item)))
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;(template&#x00A0;'((&#x22C6;&#x00A0;[c&#x00A0;1&#x00A0;1])&#x00A0;})&#x00A0;(rest&#x00A0;item))))
&#x00A0;<br />
&#x00A0;<br />(deformat&#x00A0;(lambda&#x00A0;.&#x00A0;3)&#x00A0;(item)
&#x00A0;<br />&#x00A0;&#x00A0;(template&#x00A0;'({&#x00A0;&#x22C6;&#x00A0;[i&#x00A0;1&#x00A0;1]&#x00A0;(&#x22C6;&#x00A0;[c&#x00A0;1&#x00A0;1])&#x00A0;})
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(first&#x00A0;item)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(cons&#x00A0;(if&#x00A0;(null&#x00A0;(second&#x00A0;item))&#x00A0;'!(!)&#x00A0;(second&#x00A0;item))
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(rest&#x00A0;(rest&#x00A0;item)))))
</div>
<!--l. 340--><p class="nopar" >

<table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li17.html#allman1se81.html" >Up</a></td><td class="clinks"><a 
href="allman1se80.html" >Prev</a></td><td class="clinks"><a 
href="allman1se80.html#tailallman1se80.html" >PrevTail</a></td><td class="clinks"><a 
href="allman1se81.html" >Front</a></td></tr></table><a 
 id="tailallman1se81.html"></a>  
</body></html> 
