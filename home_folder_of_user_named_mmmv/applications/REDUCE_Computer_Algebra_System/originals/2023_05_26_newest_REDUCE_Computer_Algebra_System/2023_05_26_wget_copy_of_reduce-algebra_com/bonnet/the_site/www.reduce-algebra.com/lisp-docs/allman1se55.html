<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>The Debug Module</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,html --> 
<meta name="src" content="allman1.tex"> 
<meta name="date" content="2014-05-02 18:10:00"> 
<link rel="stylesheet" type="text/css" href="allman1.css"> 
</head><body 
>
<p align="centre"><img src="http://www.reduce-algebra.com/lisp-docs/redlogo.png" width=621 height=60 border=0 alt="REDUCE"></p><table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li12.html#allman1se55.html" >Up</a></td><td class="clinks"><a 
href="allman1se55.html#tailallman1se55.html">Tail</a></td></tr></table><h3 class="sectionHead"><span class="titlemark">13.1    </span> <a 
 id="x70-15000013.1"></a>The Debug Module</h3>
<a 
 id="dx70-150001"></a>
<a 
 id="dx70-150002"></a>
<!--l. 6--><p class="noindent" ><span 
class="ptmb7t-x-x-120">debug </span>is a loadable option. This module provides a basic debugging tool which provides a
breakpoint function, and functions for breaking and tracing functions and methods
selected by the user. debug is loaded automatically if one of the functions tr, trst or br is
called.
<!--l. 12--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">13.1.1    </span> <a 
 id="x70-15100013.1.1"></a>Overview of Functionality</h4>
<!--l. 14--><p class="noindent" >The function breakpoint allows the user to set a breakpoint anywhere within his code. Whenever
a breakpoint is called a continuable break loop is entered. This allows the user to examine or
modify variables, view a backtrace, and continue execution.
<!--l. 20--><p class="noindent" >Tracing gives a record of the sequence of calls made to a set of functions specified by the user.
When a traced function is entered a message is printed giving the function name, level of
recursion, and values of any arguments. Upon function exit another message is printed, giving
the value returned by the function.
<!--l. 27--><p class="noindent" >Breaking a function means that the system enters a continuable break loop both before
and after evaluation of the body of the function. Within the break loop the user may
inspect and change values of parameters and non-local variables, and then continue
execution. A break on entry occurs after the function&#8217;s formal parameters have been bound
to the actual arguments but before any of the forms in the function body have been
evaluated. The break on exit occurs after the body of the broken function has been
evaluated.

<!--l. 37--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">13.1.2    </span> <a 
 id="x70-15200013.1.2"></a>Using Break and Trace</h4>
<!--l. 48--><p class="noindent" ><div class="minipage"><a 
 id="dx70-152001"></a>
<span 
class="ptmb7t-x-x-120">(tr [NAME: id]): list                                                                                                  </span><span 
class="ptmri7t-x-x-120">macro</span>
<br 
class="newline" /><div class="minipage">If  no  arguments  are  given  then  a  list  is  returned  which  indicates  which
functions are currently being traced. Otherwise, each argument is treated as
a reference to a function, and if possible, the function is set up for tracing.
The list which is returned represents the functions which have been added
to the set of functions being traced.</div>
</div>
<!--l. 61--><p class="noindent" ><div class="minipage"><a 
 id="dx70-152002"></a>
<span 
class="ptmb7t-x-x-120">(trst [NAME: id]): list                                                                                               </span><span 
class="ptmri7t-x-x-120">macro</span>
<br 
class="newline" /><div class="minipage">If  no  arguments  are  given  then  a  list  is  returned  which  indicates  which
functions are currently being traced. Otherwise, each argument is treated as
a reference to a function, and if possible, the function is set up for tracing.
The list which is returned represents the functions which have been added to
the set of functions being traced. Trst can be used only for functions which
are not compiled. Additionally to the entry and exit messages, for each <span 
class="cmmi-12">setq</span>
assignment inside the function the variable name and the value are printed.</div>
</div>
<!--l. 71--><p class="noindent" ><div class="minipage"><a 
 id="dx70-152003"></a>
<span 
class="ptmb7t-x-x-120">(br [NAME: id, method-specification]): list                                                           </span><span 
class="ptmri7t-x-x-120">macro</span>
<br 
class="newline" /><div class="minipage">If  no  arguments  are  given  then  a  list  is  returned  which  indicates  which
functions are currently broken. NAME is treated as a reference to a function,
and if possible, the function is set up for breaking. Subsequent arguments
will be processed. The list which is returned represents the functions which
have been added to the set of broken functions.</div></div>
<!--l. 80--><p class="noindent" ><div class="minipage"><a 
 id="dx70-152004"></a>
<span 
class="ptmb7t-x-x-120">(untr [NAME:id]): list                                                                                              </span><span 
class="ptmri7t-x-x-120">macro</span>
<br 
class="newline" /><div class="minipage">If no arguments are given then tracing is removed for each traced function.
NAME  is  treated  as  a  reference  to  a  function,  and  if  possible,  tracing  is
disabled for this function. Subsequent arguments will be processed. The list
which is returned contains the names of the functions for which tracing has
been removed.</div></div>

<!--l. 88--><p class="noindent" ><div class="minipage"><a 
 id="dx70-152005"></a>
<span 
class="ptmb7t-x-x-120">(unbr [NAME:id,]): list                                                                                            </span><span 
class="ptmri7t-x-x-120">macro</span>
<br 
class="newline" /><div class="minipage">If  no  arguments  are  given  then  breaking  is  turned  off  for  each  broken
function.  NAME  is  treated  as  a  reference  to  a  function,  and  if  possible,
breaking is disabled for this function. The list which is returned contains the
names of the functions for which breaking has been removed.</div>
</div>
<!--l. 91--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">13.1.3    </span> <a 
 id="x70-15300013.1.3"></a>Sample Session</h4>
<!--l. 94--><p class="noindent" >Trace and break printout goes to the standard output channel. Because multiple nested calls are
usually shown, indentation and vertical bars are used to line up function entry and return
messages for the same function.

<div class="verbatim" id="verbatim-324">
(de&#x00A0;add3&#x00A0;(a1&#x00A0;a2&#x00A0;a3)
&#x00A0;<br />&#x00A0;&#x00A0;(+&#x00A0;a1&#x00A0;(add2&#x00A0;a2&#x00A0;a3)))
</div>
<!--l. 102--><p class="nopar" >

<div class="verbatim" id="verbatim-325">
(de&#x00A0;add2&#x00A0;(a1&#x00A0;a2)
&#x00A0;<br />&#x00A0;&#x00A0;(+&#x00A0;a1&#x00A0;a2))
</div>
<!--l. 106--><p class="nopar" >

<div class="verbatim" id="verbatim-326">
(de&#x00A0;fact&#x00A0;(n)
&#x00A0;<br />&#x00A0;&#x00A0;(cond&#x00A0;((zerop&#x00A0;n)&#x00A0;1)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(t&#x00A0;(times&#x00A0;n&#x00A0;(fact&#x00A0;(sub1&#x00A0;n))))))
</div>
<!--l. 111--><p class="nopar" >

<div class="verbatim" id="verbatim-327">
1&#x00A0;lisp&#x003E;&#x00A0;(br&#x00A0;add3)
&#x00A0;<br />In&#x00A0;a&#x00A0;break,&#x00A0;t&#x00A0;prints&#x00A0;backTrace;&#x00A0;c&#x00A0;Continues;
&#x00A0;<br />q&#x00A0;Quits&#x00A0;a&#x00A0;level;&#x00A0;a&#x00A0;Aborts&#x00A0;to&#x00A0;top.
&#x00A0;<br />(ADD3)
&#x00A0;<br />2&#x00A0;lisp&#x003E;&#x00A0;(tr&#x00A0;'add3)
&#x00A0;<br />&#x22C6;&#x22C6;&#x22C6;&#x22C6;&#x22C6;&#x00A0;(QUOTE&#x00A0;ADD3)&#x00A0;is&#x00A0;not&#x00A0;a&#x00A0;valid&#x00A0;method-specification.
&#x00A0;<br />NIL
&#x00A0;<br />3&#x00A0;lisp&#x003E;&#x00A0;(tr&#x00A0;add3&#x00A0;add2)
&#x00A0;<br />(ADD2&#x00A0;ADD3)
&#x00A0;<br />4&#x00A0;lisp&#x003E;&#x00A0;(add3&#x00A0;5&#x00A0;6&#x00A0;7)
&#x00A0;<br />ADD3&#x00A0;entry:
&#x00A0;<br />|&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;A1:&#x00A0;5
&#x00A0;<br />|&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;A2:&#x00A0;6
&#x00A0;<br />|&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;A3:&#x00A0;7
&#x00A0;<br />|&#x00A0;&#x00A0;ADD3&#x00A0;entry&#x00A0;BREAK:
&#x00A0;<br />|&#x00A0;&#x00A0;NMODE&#x00A0;Break&#x00A0;loop
&#x00A0;<br />5&#x00A0;lisp&#x00A0;break&#x00A0;(1)&#x003E;&#x00A0;c&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;%&#x00A0;Continue
&#x00A0;<br />|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;ADD2&#x00A0;entry:
&#x00A0;<br />|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;A1:&#x00A0;6
&#x00A0;<br />|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;A2:&#x00A0;7
&#x00A0;<br />|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;ADD2&#x00A0;value&#x00A0;=&#x00A0;13
&#x00A0;<br />|&#x00A0;&#x00A0;ADD3&#x00A0;exit&#x00A0;BREAK,&#x00A0;value&#x00A0;=&#x00A0;18:
&#x00A0;<br />|&#x00A0;&#x00A0;NMODE&#x00A0;Break&#x00A0;loop
&#x00A0;<br />6&#x00A0;lisp&#x00A0;break&#x00A0;(1)&#x003E;&#x00A0;c
&#x00A0;<br />ADD4&#x00A0;value&#x00A0;=&#x00A0;18
&#x00A0;<br />18
</div>
<!--l. 139--><p class="nopar" >

<div class="verbatim" id="verbatim-328">
1&#x00A0;lisp&#x003E;&#x00A0;(tr&#x00A0;fact)
&#x00A0;<br />(FACT)
&#x00A0;<br />2&#x00A0;lisp&#x003E;&#x00A0;(fact&#x00A0;4)
&#x00A0;<br />FACT&#x00A0;entry:
&#x00A0;<br />|&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;N:&#x00A0;4
&#x00A0;<br />|&#x00A0;&#x00A0;FACT&#x00A0;reentry&#x00A0;(#&#x00A0;2):
&#x00A0;<br />|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;%&#x00A0;(#&#x00A0;2)&#x00A0;represents&#x00A0;the&#x00A0;depth&#x00A0;of&#x00A0;recursion
&#x00A0;<br />|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;N:&#x00A0;3
&#x00A0;<br />|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;FACT&#x00A0;reentry&#x00A0;(#&#x00A0;3):
&#x00A0;<br />|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;N:&#x00A0;2
&#x00A0;<br />|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;FACT&#x00A0;reentry&#x00A0;(#&#x00A0;4):
&#x00A0;<br />|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;N:&#x00A0;1
&#x00A0;<br />|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;FACT&#x00A0;reentry&#x00A0;(#&#x00A0;5):
&#x00A0;<br />|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;N:&#x00A0;0
&#x00A0;<br />|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;FACT&#x00A0;value&#x00A0;(#&#x00A0;5)&#x00A0;=&#x00A0;1
&#x00A0;<br />|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;FACT&#x00A0;value&#x00A0;(#&#x00A0;4)&#x00A0;=&#x00A0;1
&#x00A0;<br />|&#x00A0;&#x00A0;|&#x00A0;&#x00A0;FACT&#x00A0;value&#x00A0;(#&#x00A0;3)&#x00A0;=&#x00A0;2
&#x00A0;<br />|&#x00A0;&#x00A0;FACT&#x00A0;value&#x00A0;(#&#x00A0;2)&#x00A0;=&#x00A0;6
&#x00A0;<br />FACT&#x00A0;value&#x00A0;=&#x00A0;24
&#x00A0;<br />24
&#x00A0;<br />3&#x00A0;lisp&#x003E;&#x00A0;(trace)
&#x00A0;<br />(FACT&#x00A0;ADD2&#x00A0;ADD3&#x00A0;ADD4)
&#x00A0;<br />4&#x00A0;lisp&#x003E;&#x00A0;(untrace)
&#x00A0;<br />(ADD4&#x00A0;ADD3&#x00A0;ADD2&#x00A0;FACT)
&#x00A0;<br />5&#x00A0;lisp&#x003E;&#x00A0;(restr)
&#x00A0;<br />T
</div>
<!--l. 167--><p class="nopar" >
<!--l. 170--><p class="noindent" >Tracing a macro will happen at macroexpand time. The value returned will be the
macroexpanded form, and thus is quite useful in determining if your macro expanded properly.
Note that when code is complied the application of a macro is expanded and this expansion
replaces the the application.

<div class="verbatim" id="verbatim-329">
1&#x00A0;lisp&#x003E;&#x00A0;(trace&#x00A0;plus)
&#x00A0;<br />(PLUS)
&#x00A0;<br />2&#x00A0;lisp&#x003E;&#x00A0;(plus&#x00A0;2&#x00A0;9&#x00A0;-3&#x00A0;7&#x00A0;8)
&#x00A0;<br />PLUS&#x00A0;entry:
&#x00A0;<br />|&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;ARG1&#x00A0;:(PLUS&#x00A0;2&#x00A0;9&#x00A0;-3&#x00A0;7&#x00A0;...)
&#x00A0;<br />PLUS&#x00A0;value&#x00A0;=&#x00A0;(PLUS2&#x00A0;2&#x00A0;(PLUS2&#x00A0;9&#x00A0;(PLUS2&#x00A0;-3&#x00A0;(PLUS2&#x00A0;7&#x00A0;8))))
&#x00A0;<br />23
</div>
<!--l. 184--><p class="nopar" >

<div class="verbatim" id="verbatim-330">
(de&#x00A0;fact&#x00A0;(n)
&#x00A0;<br />&#x00A0;&#x00A0;(cond&#x00A0;((zerop&#x00A0;n)&#x00A0;1)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(t&#x00A0;(breakpoint&#x00A0;"Fact;&#x00A0;n&#x003C;&#x003E;0&#x00A0;branch&#x00A0;of&#x00A0;cond,&#x00A0;n=%p"&#x00A0;n)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(times&#x00A0;n&#x00A0;(fact&#x00A0;(sub1&#x00A0;n))))))
</div>
<!--l. 190--><p class="nopar" >

<div class="verbatim" id="verbatim-331">
1&#x00A0;lisp&#x003E;&#x00A0;(fact&#x00A0;2)
&#x00A0;<br />User&#x00A0;Breakpoint:&#x00A0;Fact;&#x00A0;n&#x003C;&#x003E;0&#x00A0;branch&#x00A0;of&#x00A0;cond,&#x00A0;n=2
&#x00A0;<br />NMODE&#x00A0;Break&#x00A0;loop
&#x00A0;<br />2&#x00A0;lisp&#x00A0;break&#x00A0;(1)&#x003E;&#x00A0;c
&#x00A0;<br />User&#x00A0;Breakpoint:&#x00A0;Fact;&#x00A0;n&#x003C;&#x003E;0&#x00A0;branch&#x00A0;of&#x00A0;cond,&#x00A0;n=1
&#x00A0;<br />NMODE&#x00A0;Break&#x00A0;loop
&#x00A0;<br />3&#x00A0;lisp&#x00A0;break&#x00A0;(1)&#x003E;&#x00A0;c
&#x00A0;<br />2
</div>
<!--l. 200--><p class="nopar" >
<!--l. 202--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">13.1.4    </span> <a 
 id="x70-15400013.1.4"></a>Redefining a Broken or Traced Function</h4>
<!--l. 204--><p class="noindent" >The basic definition of a function is the definition without any of the break or tracing side
effects. This basic definition may be accessed by the function getd. The basic definition may
also be redefined by using the function putd without interfering with the break/trace side effects,
as long as the parameter list stays the same. If you intend to change the number or order of
parameters you should first remove the break/trace wrappers from it with untrace and/or
unbr.

<!--l. 1--><p class="noindent" ><table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li12.html#allman1se55.html" >Up</a></td><td class="clinks"><a 
href="allman1se55.html" >Front</a></td></tr></table><a 
 id="tailallman1se55.html"></a>   
</body></html> 
