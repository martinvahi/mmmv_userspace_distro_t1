<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Reference Information</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,html --> 
<meta name="src" content="allman1.tex"> 
<meta name="date" content="2014-05-02 18:10:00"> 
<link rel="stylesheet" type="text/css" href="allman1.css"> 
</head><body 
>
<p align="centre"><img src="https://reduce-algebra.sourceforge.io/lisp-docs/redlogo.png" width=621 height=60 border=0 alt="REDUCE"></p><table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li18.html#allman1se84.html" >Up</a></td><td class="clinks"><a 
href="allman1se85.html" >Next</a></td><td class="clinks"><a 
href="allman1se83.html" >Prev</a></td><td class="clinks"><a 
href="allman1se83.html#tailallman1se83.html" >PrevTail</a></td><td class="clinks"><a 
href="allman1se84.html#tailallman1se84.html">Tail</a></td></tr></table><h3 class="sectionHead"><span class="titlemark">19.3    </span> <a 
 id="x105-20600019.3"></a>Reference Information</h3>
<!--l. 155--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">19.3.1    </span> <a 
 id="x105-20700019.3.1"></a>Loading Objects</h4>
<!--l. 157--><p class="noindent" ><span 
class="ptmb7t-x-x-120">Note: This file defines both macros and ordinary LISP functions. It must be loaded before</span>
<span 
class="ptmb7t-x-x-120">any of these functions are used. </span>The recommended way of doing this is to put the expression:
(BothTimes (load objects)) at the beginning of your source file. This will cause the package to
be loaded at both compile and load time.
<!--l. 164--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">19.3.2    </span> <a 
 id="x105-20800019.3.2"></a>Flavor Definition</h4>
<!--l. 166--><p class="noindent" >Flavors are defined by using the macro defflavor This macro has the form:
<!--l. 172--><p class="noindent" ><div class="minipage"><a 
 id="dx105-208001"></a>
<span 
class="ptmb7t-x-x-120">(defflavor flavor-name (var1 var2 ...) (inheritance-flavor-list)</span><br 
class="newline" /><span 
class="ptmb7t-x-x-120">option1 option2 ...):list                                                                                              </span><span 
class="ptmri7t-x-x-120">macro</span>
<br 
class="newline" /><div class="minipage">
</div></div>
<!--l. 174--><p class="noindent" >flavor-name is the name of the flavor being defined. var1 var2 ... are the instance variables of the
flavor. Each must be a symbol that is the name of the variable, or a list of two elements. The list
form must have the name of the instance variable (id) as its first element and a default
initialization form as its second argument. Do not use names like &#8221;IF&#8221; or &#8221;WHILE&#8221; for
instance variables: they are translated freely within method bodies (see defmethod). The
translation process is not very smart. For example, it doesn&#8217;t distinguish between
formal parameters to methods with the same name as instance variables. For safety,
if formal parameters are found that match instance variables, an error message is
issued. Although the translation process isn&#8217;t smart, it at least understands the nature of
quote.
<!--l. 190--><p class="noindent" >The inheritance-flavor-list must be a list of one element or the empty list. When the empty list, it
specifies that no inheritance is used in defining this flavor (for a description of inheritance, see
section 10.3). When a one element list, the element must be the name of another flavor to inherit
from. This other flavor must have already been compiled or loaded or an error message will be
issued.
<!--l. 198--><p class="noindent" >option1 option2 ... are the options that effect the instance variables and methods of the flavor.
Recognized options are:

<div class="verbatim" id="verbatim-384">
&#x00A0;&#x00A0;&#x00A0;(INITABLE-INSTANCE-VARIABLES&#x00A0;var1&#x00A0;var2&#x00A0;...)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;(GETTABLE-INSTANCE-VARIABLES&#x00A0;var1&#x00A0;var2&#x00A0;...)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;(SETTABLE-INSTANCE-VARIABLES&#x00A0;var1&#x00A0;var2&#x00A0;...)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;(FAST-ACCESS-FOR-METHODS&#x00A0;method1&#x00A0;method2&#x00A0;...)
</div>
<!--l. 207--><p class="nopar" >
<table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:301;" 
class="tabbing"></td><td  
class="tabbing">INITABLE-INSTANCE-VARIABLES     </td><td style="width:301;" 
class="tabbing">[make all instance variables
</td></tr></table>
<!--l. 211--><p class="noindent" >                                <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td><td style="width:301;" 
class="tabbing">                                                                   </td><td  
class="tabbing">INITABLE]</td></tr></table>
<!--l. 212--><p class="noindent" >                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:301;" 
class="tabbing"></td><td  
class="tabbing">GETTABLE-INSTANCE-VARIABLES   </td><td style="width:301;" 
class="tabbing">[make all instance variables</td></tr></table>
<!--l. 213--><p class="noindent" >                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td><td style="width:301;" 
class="tabbing">                                                                   </td><td  
class="tabbing">GETTABLE]</td></tr></table>
<!--l. 214--><p class="noindent" >                  <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:301;" 
class="tabbing"></td><td  
class="tabbing">SETTABLE-INSTANCE-VARIABLES   </td><td  
class="tabbing">[make all instance variables</td></tr></table>
<!--l. 215--><p class="noindent" >                               <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td><td  
class="tabbing">                                                                   </td><td  
class="tabbing">SETTABLE]</td></tr></table>
<!--l. 216--><p class="noindent" >                     <table  
cellpadding="0" border="0" cellspacing="0" 
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td  
class="tabbing"></td><td  
class="tabbing">FAST-ACCESS-FOR-METHODS            </td><td  
class="tabbing">[access all methods fast]</td></tr></table>
<!--l. 218--><p class="noindent" >
<!--l. 220--><p class="noindent" >An empty list of variables is taken as meaning all variables rather than none, so
(GETTABLE-INSTANCE-VARIABLES) is equivalent to GETTABLE-INSTANCE-VARIABLES.
<!--l. 224--><p class="noindent" >Initable instance variables may be initialized using options to make-instance or instantiate-flavor.
See below.
<!--l. 227--><p class="noindent" >For each gettable instance variable a method of the same name is generated to access the
instance variable. If instance variable LOCATION is gettable, one can invoke (=<span 
class="cmmi-12">&#x003E; &#x003C;</span>object<span 
class="cmmi-12">&#x003E;</span>
LOCATION).
<!--l. 232--><p class="noindent" >For each settable instance variable a method with the name SET-<span 
class="cmmi-12">&#x003C;</span>name<span 
class="cmmi-12">&#x003E; </span>is generated. If
instance variable LOCATION is settable, one can invoke (=<span 
class="cmmi-12">&#x003E; &#x003C;</span>object<span 
class="cmmi-12">&#x003E; </span>SET-LOCATION
<span 
class="cmmi-12">&#x003C;</span>expression<span 
class="cmmi-12">&#x003E;</span>). Settable instance variables are always also gettable and initable by implication.
If this feature is not desired, define a method such as SET-LOCATION directly rather than
declaring the instance variable to be settable.
<!--l. 240--><p class="noindent" >FAST-ACCESS-FOR-METHODS is used to speed up message sending for a select set of
methods. Methods specified in this option are accessed by a different means then &#8221;normal&#8221;
methods. This option should only be used when:
      <ul class="itemize1">
      <li class="itemize">It is known that message sending speed is critical.
      </li>
      <li class="itemize">A select set of methods of a flavor are known to be called very frequently compared
      to the rest of the methods of that flavor.</li></ul>
<!--l. 252--><p class="noindent" >The order methods are specified with this option determines the order they are accessed (speed
of method lookup). Thus, the first method specified will be accessed the quickest and the last
method specified the slowest. If no methods are given (the second form above), the objects

package will decide on its own order. Specifying no methods should be used only if a
flavor has a few methods (i.e., less then 10). If any of the methods specified are not
methods of the flavor, a warning message will be issued and fast access for it will be
ignored.
<!--l. 263--><p class="noindent" >As an example, consider the flavor TUNAFISH which has 70 methods. It is determined that
much time is spent calling five low level TUNAFISH methods whose names are A, B, C, D, and
E. Specifying:

<div class="verbatim" id="verbatim-385">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(FAST-ACCESS-FOR-METHODS&#x00A0;A&#x00A0;B&#x00A0;C&#x00A0;D&#x00A0;E)
</div>
<!--l. 270--><p class="nopar" >
<!--l. 272--><p class="noindent" >in the flavor definition of TUNAFISH will cause method A to be accessed faster then any other
method, B to be accessed slower then A, C slower then B, D slower then C, and finally E the
slowest of the five methods. The remaining 65 methods of TUNAFISH will be accessed as slow
or slower then E.
<!--l. 278--><p class="noindent" >As its value, defflavor returns a list of the form:

<div class="verbatim" id="verbatim-386">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(flavor&#x00A0;&#x003C;flavor-name&#x003E;)
</div>
<!--l. 282--><p class="nopar" >Where <span 
class="cmmi-12">&#x003C;</span>flavor-name<span 
class="cmmi-12">&#x003E; </span>is the name of the flavor being defined. Examples of Flavor
Definition

<div class="verbatim" id="verbatim-387">
&#x00A0;&#x00A0;(defflavor&#x00A0;complex-number
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(real-part&#x00A0;imaginary-part)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;gettable-instance-variables
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;initable-instance-variables
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;)
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;(defflavor&#x00A0;complex-number
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;((real-part&#x00A0;0.0)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(imaginary-part&#x00A0;0.0)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(number)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;gettable-instance-variables
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(settable-instance-variables&#x00A0;real-part)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;)
</div>
<!--l. 302--><p class="nopar" >
<h4 class="subsectionHead"><span class="titlemark">19.3.3    </span> <a 
 id="x105-20900019.3.3"></a>Method Definition</h4>
<!--l. 305--><p class="noindent" >As you may recall, methods are defined using the macro defmethod. It has the form:

<div class="verbatim" id="verbatim-388">
(defmethod&#x00A0;(flavor-name&#x00A0;method-name)&#x00A0;([arg1&#x00A0;arg2&#x00A0;...])
&#x00A0;<br />&#x003C;expression1&#x003E;&#x00A0;&#x003C;expression2&#x003E;...):&#x00A0;list&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;macro
</div>
<!--l. 311--><p class="nopar" >flavor-name is the name of the flavor a method is begin defined for. It must be an
id.
<!--l. 315--><p class="noindent" >method-name is the name of this method. It must also be an id.
<!--l. 318--><p class="noindent" >arg1 arg2 ... are the arguments of the method. There may be zero or more and they must all be
ids.
<!--l. 321--><p class="noindent" ><span 
class="cmmi-12">&#x003C;</span>expression1<span 
class="cmmi-12">&#x003E; &#x003C;</span>expression2<span 
class="cmmi-12">&#x003E;</span>... make up the body of the method. This body can refer to
any instance variable of the flavor by using the name just like an ordinary variable.
They can also set them using setf. All occurrences of instance variables (except within
evectors or quoted lists) are translated to an invocation of the form (EGETV SELF
n).
<!--l. 328--><p class="noindent" >The body of a method can also freely use SELF like it were another instance variable.
SELF is bound to the object that the method applies to. SELF may not be setqed or
setfed.
<!--l. 332--><p class="noindent" >The value returned by defmethod is a list of the form:

<div class="verbatim" id="verbatim-389">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(method&#x00A0;&#x003C;flavor-name&#x003E;&#x00A0;&#x003C;method-name&#x003E;)
</div>
<!--l. 336--><p class="nopar" >
<!--l. 338--><p class="noindent" >Where <span 
class="cmmi-12">&#x003C;</span>flavor-name<span 
class="cmmi-12">&#x003E; </span>and <span 
class="cmmi-12">&#x003C;</span>method-name<span 
class="cmmi-12">&#x003E; </span>are simply the names of the flavor being defined
and method being defined respectively.<br 
class="newline" />
<!--l. 342--><p class="noindent" >Examples of Method Definition:

<div class="verbatim" id="verbatim-390">
&#x00A0;&#x00A0;(defmethod&#x00A0;(complex-number&#x00A0;real-part)&#x00A0;()&#x00A0;real-part)
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;(defmethod&#x00A0;(complex-number&#x00A0;set-real-part)&#x00A0;(new-real-part)
&#x00A0;<br />&#x00A0;&#x00A0;(setf&#x00A0;real-part&#x00A0;new-real-part))
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;(defmethod&#x00A0;(toaster&#x00A0;plug-into)&#x00A0;(socket)
&#x00A0;<br />&#x00A0;&#x00A0;(setf&#x00A0;plugged-into&#x00A0;socket)
&#x00A0;<br />&#x00A0;&#x00A0;(=&#x003E;&#x00A0;socket&#x00A0;assert-as-plugged-in&#x00A0;self))
</div>
<!--l. 353--><p class="nopar" >
<h4 class="subsectionHead"><span class="titlemark">19.3.4    </span> <a 
 id="x105-21000019.3.4"></a>Object Creation</h4>
<!--l. 356--><p class="noindent" >The most common way instances of a flavor are created is by using the function make-instance.
It has the form:
<!--l. 376--><p class="noindent" ><div class="minipage"><a 
 id="dx105-210001"></a>
<span 
class="ptmb7t-x-x-120">(make-instance flavor-name:id [initialization-sequence]):</span><br 
class="newline" /><span 
class="ptmb7t-x-x-120">flavored object                                                                                                              </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">make-instance   takes   as   arguments   a   flavor   name   and   an   optional
initialization sequence.
<!--l. 376--><p class="noindent" >Flavor-name must be an id that represents an existing flavor.
<!--l. 376--><p class="noindent" >The optional initialization-sequence, when specified, consists of alternating
pairs of instance variable names and corresponding initial values. Note that
the  instance  variable  names  are  quoted,  in  the  example  above,  because
all  the  arguments  are  evaluated.  make-instance  returns  an  object  that  is
&#8221;initialized.&#8221;</div></div>
<!--l. 378--><p class="noindent" >Examples of make-instance

<div class="verbatim" id="verbatim-391">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(make-instance&#x00A0;'complex-number)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(make-instance&#x00A0;'complex-number&#x00A0;'real-part&#x00A0;0.0
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;'imaginary-part&#x00A0;1.0)
</div>
<!--l. 384--><p class="nopar" >An object returned by make-instance is initialized as follows:
<!--l. 387--><p class="noindent" >First, all instance variables with initialization specified in the call to make-instance are
initialized to the value given. After this the objects DEFAULT-INIT method is envoked. This
method is constructed by the flavor definition (defflavor). It initializes any instance variables not
specified in the call to make-instance but having default initializations specified in the
flavor definition. It then sets all remaining uninitialized instance variables to the value
*UNBOUND*. The default initialization and initialization to *UNBOUND* is performed by the
DEFAULT-INIT method.
<!--l. 398--><p class="noindent" >If a method named INIT is defined for this flavor of object, it is invoked automatically after the
initializations just discussed. The INIT method is passed, as its one argument, a list of
alternating variable names and initial values. This list is the result of evaluating the
initializations given to make-instance. For example, if we call:

<div class="verbatim" id="verbatim-392">
(make-instance&#x00A0;'complex-number&#x00A0;'real-part&#x00A0;(sin&#x00A0;30)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;'imaginary-part&#x00A0;(cos&#x00A0;30))
</div>
<!--l. 408--><p class="nopar" >then the argument to the INIT method (if any) would be

<div class="verbatim" id="verbatim-393">
&#x00A0;&#x00A0;(real-part&#x00A0;.5&#x00A0;imaginary-part&#x00A0;.866).
</div>
<!--l. 413--><p class="nopar" >The INIT method may do anything desired to set up the desired initial state of the
object.
<!--l. 417--><p class="noindent" >At present, this value passed to the INIT method is of virtually no use to the INIT method since
the values have been stored into the instance variables already. In the future, though, the objects
package may be extended to permit keywords other than names of instance variables to be in the
initialization part of calls to make-instance. If this is done, INIT methods will be able to use the
information by scanning the argument.
<!--l. 426--><p class="noindent" >For details on how initialization is done when inheritance is in effect, see Using Inheritance,
section 10.3.
<!--l. 429--><p class="noindent" >Another less common way to create an object is through the use of the function instantiate-flavor. It
has the form:
<!--l. 439--><p class="noindent" ><div class="minipage"><a 
 id="dx105-210002"></a>
<span 
class="ptmb7t-x-x-120">(instantiate-flavor flavor name:any [U:list]):</span><br 
class="newline" /><span 
class="ptmb7t-x-x-120">flavored object                                                                                                              </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" />&#x00A0;      <div class="minipage">This  is  the  same  as  make-instance,  except  that  the  initialization  list  is
provided as a single, required argument. The list must be a list of alternating
keyword names and initial values.</div>
</div>
<!--l. 441--><p class="noindent" >Example:

<div class="verbatim" id="verbatim-394">
&#x00A0;&#x00A0;(instantiate-flavor&#x00A0;'complex-number
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(list&#x00A0;&#x00A0;'real-part&#x00A0;&#x00A0;(sin&#x00A0;&#x00A0;30)&#x00A0;'imaginary-part&#x00A0;(cos&#x00A0;30)))
</div>
<!--l. 446--><p class="nopar" >
<!--l. 448--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">19.3.5    </span> <a 
 id="x105-21100019.3.5"></a>Message Sending</h4>
<!--l. 450--><p class="noindent" >There are several ways to invoke a method:
<!--l. 453--><p class="noindent" ><div class="minipage"><a 
 id="dx105-211001"></a>
<span 
class="ptmb7t-x-x-120">(=</span><span 
class="cmmi-12">&#x003E; </span><span 
class="ptmb7t-x-x-120">object:object method:id): any                                                                             </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">
</div>
</div>Examples:

<div class="verbatim" id="verbatim-395">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;(=&#x003E;&#x00A0;r&#x00A0;real-part)
</div>
<!--l. 458--><p class="nopar" >

<div class="verbatim" id="verbatim-396">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;(=&#x003E;&#x00A0;r&#x00A0;set-real-part&#x00A0;1.0)
</div>
<!--l. 461--><p class="nopar" >The message name is not quoted. Arguments to the method are supplied as arguments to =<span 
class="cmmi-12">&#x003E;</span>. In
these examples, r is the object, real-part and set-real-part are the methods, and 1.0 is the
argument to the set-real-part method.
<!--l. 468--><p class="noindent" ><div class="minipage"><a 
 id="dx105-211002"></a>
<span 
class="ptmb7t-x-x-120">(send object:object method:id): any                                                                          </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">
</div>
</div>Examples:

<div class="verbatim" id="verbatim-397">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;(send&#x00A0;r&#x00A0;'real-part)
</div>
<!--l. 472--><p class="nopar" >

<div class="verbatim" id="verbatim-398">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;(send&#x00A0;r&#x00A0;'set-real-part&#x00A0;1.0)
</div>
<!--l. 475--><p class="nopar" >
<!--l. 477--><p class="noindent" >The meanings of these two examples are the same as the meanings of the previous two. Only the
syntax is different: the message name is quoted.
<!--l. 484--><p class="noindent" ><div class="minipage"><a 
 id="dx105-211003"></a>
<span 
class="ptmb7t-x-x-120">(send-if-handles object:object method:id [U:any]): any                                          </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">Conditionally Send a Message
</div></div>
<!--l. 486--><p class="noindent" >Examples:

<div class="verbatim" id="verbatim-399">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;(send-if-handles&#x00A0;r&#x00A0;'real-part)
</div>
<!--l. 489--><p class="nopar" >

<div class="verbatim" id="verbatim-400">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;(send-if-handles&#x00A0;r&#x00A0;'set-real-part&#x00A0;1.0)
</div>
<!--l. 492--><p class="nopar" >
<!--l. 494--><p class="noindent" >SEND-IF-HANDLES is like SEND, except that if the object defines no method to handle the
message, no error is reported and NIL is returned.
<!--l. 500--><p class="noindent" ><div class="minipage"><a 
 id="dx105-211004"></a>
<span 
class="ptmb7t-x-x-120">(lexpr-send object:object method:id [U:any] V:list):any                                         </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" />&#x00A0;      <div class="minipage">Send a message (explicit &#8221;Rest&#8221; Argument List)
</div></div>
<!--l. 502--><p class="noindent" >Examples:

<div class="verbatim" id="verbatim-401">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;(lexpr-send&#x00A0;foo&#x00A0;'bar&#x00A0;a&#x00A0;b&#x00A0;c&#x00A0;(list&#x00A0;x&#x00A0;y))
</div>
<!--l. 505--><p class="nopar" >
<!--l. 507--><p class="noindent" >The last argument to LEXPR-SEND is a list of the remaining arguments.
<!--l. 515--><p class="noindent" ><div class="minipage"><a 
 id="dx105-211005"></a>
<span 
class="ptmb7t-x-x-120">(lexpr-send-if-handles object:any</span><br 
class="newline" /><span 
class="ptmb7t-x-x-120">method:id [U:any] V:list):any                                                                                     </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" />&#x00A0;      <div class="minipage">This is the same as LEXPR-SEND, except that no error is reported if the
object fails to handle the message.</div>
</div>
<!--l. 519--><p class="noindent" ><div class="minipage"><a 
 id="dx105-211006"></a>
<span 
class="ptmb7t-x-x-120">(lexpr-send-1 object:object method:id V:list):any                                                    </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" />&#x00A0;      <div class="minipage">Send a Message (Explicit Argument List)
</div>
</div>Examples:

<div class="verbatim" id="verbatim-402">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;(lexpr-send-1&#x00A0;r&#x00A0;'real-part&#x00A0;nil)
</div>
<!--l. 523--><p class="nopar" >

<div class="verbatim" id="verbatim-403">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;(lexpr-send-1&#x00A0;r&#x00A0;'set-real-part&#x00A0;(list&#x00A0;1.0))
</div>
<!--l. 526--><p class="nopar" >
<!--l. 528--><p class="noindent" >Note that the message name is quoted and that the argument list is passed as a single argument to
LEXPR-SEND-1.
<!--l. 535--><p class="noindent" ><div class="minipage"><a 
 id="dx105-211007"></a>
<span 
class="ptmb7t-x-x-120">(lexpr-send-1-if-handles object:any</span><br 
class="newline" /><span 
class="ptmb7t-x-x-120">method:any V:list): any                                                                                               </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">This is the same as LEXPR-SEND-1, except that no error is reported if the
object fails to handle the message.</div>
</div>
<!--l. 542--><p class="noindent" ><div class="minipage"><a 
 id="dx105-211008"></a>
<span 
class="ptmb7t-x-x-120">(ev-send object:any method:any V:list): any                                                             </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">EV-SEND is just like LEXPR-SEND-1, except that it is an EXPR instead
of a MACRO. Its sole purpose is to be used as a run-time function object,
for example, as a function argument to a function.</div>
</div>
<h4 class="subsectionHead"><span class="titlemark">19.3.6    </span> <a 
 id="x105-21200019.3.6"></a>Printing Objects</h4>
<!--l. 545--><p class="noindent" >Objects can print out according to their flavor. If a flavor has a channelprin method, that method
will be used by prin1, prin2, etc. to print objects of that flavor.
<!--l. 555--><p class="noindent" ><div class="minipage"><a 
 id="dx105-212001"></a>
<span 
class="ptmb7t-x-x-120">(=</span><span 
class="cmmi-12">&#x003E; </span><span 
class="ptmb7t-x-x-120">any CHANNELPRIN channel level prin1?): any                                         </span><span 
class="ptmri7t-x-x-120">method</span>
<br 
class="newline" /><div class="minipage">A channelprin method must accept three arguments: a channel (currently a
small integer); either nil or a number which will indicate the current level
of nesting within lists, vectors, or other objects; and a boolean which will
indicate whether prin1- or prin2-style printing is being done.</div>
</div>
<!--l. 557--><p class="noindent" >Ordinarily, an object should print in the form #<span 
class="cmmi-12">&#x003C;</span>flavor info ... <span 
class="cmmi-12">&#x003E;</span>. If the level of printing is not
nil, printing of lists, vectors, objects, etc. within the channelprin method should be done with
prinlevel bound to 1 less than its value at the time of entry to the method.
<!--l. 563--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">19.3.7    </span> <a 
 id="x105-21300019.3.7"></a>Useful Functions on Objects</h4>

<!--l. 573--><p class="noindent" ><div class="minipage"><a 
 id="dx105-213001"></a>
<span 
class="ptmb7t-x-x-120">(object-type U:any): id, NIL                                                                                       </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">The object-type function returns the type (an id) of the specified object,
or nil, if the argument is not an object. At present this function cannot be
guaranteed to distinguish between objects created by the objects package
and other LISP entities, but the only possible confusion is with vectors or
evectors.</div></div>
<!--l. 580--><p class="noindent" ><div class="minipage"><a 
 id="dx105-213002"></a>
<span 
class="ptmb7t-x-x-120">(flavor-defined? flavor-name:id): t, nil                                                                       </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">Returns t if flavor-name is a currently defined flavor. Returns nil otherwise.
</div></div>
<!--l. 585--><p class="noindent" ><div class="minipage"><a 
 id="dx105-213003"></a>
<span 
class="ptmb7t-x-x-120">(declare-flavor </span><span 
class="cmmi-12">&#x003C; flavorname &#x003E;&#x003C; var</span><span 
class="cmr-12">1 </span><span 
class="cmmi-12">&#x003E;&#x003C; var</span><span 
class="cmr-12">2 </span><span 
class="cmmi-12">&#x003E;</span><span 
class="ptmb7t-x-x-120">...):</span><br 
class="newline" /><span 
class="ptmb7t-x-x-120">undefined                                                                                                                   </span><span 
class="ptmri7t-x-x-120">macro</span>
<br 
class="newline" /><div class="minipage">
</div></div>
<!--l. 597--><p class="noindent" ><div class="minipage"><a 
 id="dx105-213004"></a>
<span 
class="ptmb7t-x-x-120">(undeclare-flavor </span><span 
class="cmmi-12">&#x003C; var</span><span 
class="cmr-12">1 </span><span 
class="cmmi-12">&#x003E;&#x003C; var</span><span 
class="cmr-12">2 </span><span 
class="cmmi-12">&#x003E;</span><span 
class="ptmb7t-x-x-120">...): undefined                                              </span><span 
class="ptmri7t-x-x-120">macro</span>
<br 
class="newline" /><div class="minipage"><span 
class="pcrr7t-x-x-120">&#x22C6;&#x22C6;&#x22C6; Read these warnings carefully! &#x22C6;&#x22C6;&#x22C6;</span>
<!--l. 597--><p class="noindent" >This  facility  can  reduce  the  overhead  of  invoking  methods  on  particular
variables, but it should be used sparingly. It is not well integrated with the
rest of the language. At some point a proper declaration facility is expected
and  then  it  will  be  possible  to  make  declarations  about  objects,  integers,
vectors, etc., all in a uniform and clean way.</div>
</div>
<!--l. 599--><p class="noindent" >The declare-flavor macro allows you to declare that a specific symbol is bound to an object of a
specific flavor. This allows the flavors implementation to eliminate the run-time method lookup
normally associated with sending a message to that variable, which can result in an
appreciable improvement in execution speed. This feature is motivated solely by efficiency
considerations and should be used ONLY where the performance improvement is
critical.
<!--l. 608--><p class="noindent" >Details: if you declare the variable X to be bound to an object of flavor FOO, then <span 
class="ptmb7t-x-x-120">within the</span>
<span 
class="ptmb7t-x-x-120">context of the declaration </span>(see below), expressions of the form (<span 
class="cmr-12">=</span><span 
class="cmmi-12">&#x003E; </span>X GORP ...) or (SEND X
&#8217;GORP ...) will be replaced by function invocations of the form (FOO GORP X ...). Note that
there is no check made that the flavor FOO actually contains a method GORP.If it does
not, then a run-time error &#8221;Invocation of undefined function FOO&#8221;GORP&#8221; will be
reported.
<!--l. 617--><p class="noindent" >WARNING: The declare-flavor feature is not presently well integrated with the compiler.
Currently, the declare-flavor macro may be used only as a top-level form, like the PSL FLUID

declaration. It takes effect for all code evaluated or compiled henceforth. Thus, if you should
later compile a different file in the same compiler, the declaration will still be in effect! <span 
class="ptmb7t-x-x-120">this is a</span>
<span 
class="ptmb7t-x-x-120">dangerous crock, so be careful! </span>To avoid problems, I recommend that declare-flavor be used
only for uniquely-named variables. The effect of a declare-flavor can be undone by an
undeclare-flavor, which also may be used only as a top-level form. Therefore, it is good
practice to bracket your code in the source file with a declare-flavor and a corresponding
undeclare-flavor.

<div class="verbatim" id="verbatim-404">
&#x00A0;&#x00A0;&#x22C6;&#x22C6;&#x22C6;&#x00A0;Did&#x00A0;you&#x00A0;read&#x00A0;the&#x00A0;above&#x00A0;warnings???&#x00A0;&#x22C6;&#x22C6;&#x22C6;
</div>
<!--l. 633--><p class="nopar" >
<!--l. 636--><p class="noindent" ><div class="minipage"><a 
 id="dx105-213005"></a>
<span 
class="ptmb7t-x-x-120">(object-get-handler object:object method-name:id): id                                           </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">
</div>
</div>Note that the use of object-get-handler is not recommended. It should only be used in the most
critical places where the time to perform a normal message send is too slow and the
declare-flavor facility cannot be used.
<!--l. 642--><p class="noindent" >Given an object and a method-name, object-get-handler returns the name of the function
that implements this method. It is used to repetitively send the same message. For
example:<br 
class="newline" />

<div class="verbatim" id="verbatim-405">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(let
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;((func-name&#x00A0;(object-get-handler&#x00A0;obj&#x00A0;'banana)))
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;...
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(for
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;...
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(do&#x00A0;(idapply&#x00A0;func-name&#x00A0;(list&#x00A0;arg1&#x00A0;arg2&#x00A0;...&#x00A0;argn)))
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;)
</div>
<!--l. 656--><p class="nopar" >This is equivalent to sending the message:

<div class="verbatim" id="verbatim-406">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(=&#x003E;&#x00A0;obj&#x00A0;banana&#x00A0;arg1&#x00A0;arg2&#x00A0;...&#x00A0;argn)
</div>
<!--l. 661--><p class="nopar" >inside the for but the lookup of the function name for the message send is only performed
once.
<!--l. 665--><p class="noindent" >
<h5 class="subsubsectionHead"><a 
 id="x105-21400019.3.7"></a>Miscellaneous Functions</h5>
<!--l. 672--><p class="noindent" ><div class="minipage"><a 
 id="dx105-214001"></a>
<span 
class="ptmb7t-x-x-120">(objects-version): NIL                                                                                                 </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">This function prints a date used to check the version of the objects package
in use.  When  bugs  are  reported,  the  version  date  should  be  given.  Older
versions of the objects package did not have this function defined.</div>
</div>

<!--l. 674--><p class="noindent" ><table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li18.html#allman1se84.html" >Up</a></td><td class="clinks"><a 
href="allman1se85.html" >Next</a></td><td class="clinks"><a 
href="allman1se83.html" >Prev</a></td><td class="clinks"><a 
href="allman1se83.html#tailallman1se83.html" >PrevTail</a></td><td class="clinks"><a 
href="allman1se84.html" >Front</a></td></tr></table><a 
 id="tailallman1se84.html"></a>    
</body></html> 
