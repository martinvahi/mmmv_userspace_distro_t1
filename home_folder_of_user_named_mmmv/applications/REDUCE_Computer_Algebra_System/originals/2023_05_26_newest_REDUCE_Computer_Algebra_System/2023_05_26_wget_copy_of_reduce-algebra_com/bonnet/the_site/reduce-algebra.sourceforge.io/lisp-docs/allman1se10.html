<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Property List Functions</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,html --> 
<meta name="src" content="allman1.tex"> 
<meta name="date" content="2014-05-02 18:10:00"> 
<link rel="stylesheet" type="text/css" href="allman1.css"> 
</head><body 
>
<p align="centre"><img src="https://reduce-algebra.sourceforge.io/lisp-docs/redlogo.png" width=621 height=60 border=0 alt="REDUCE"></p><table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li3.html#allman1se10.html" >Up</a></td><td class="clinks"><a 
href="allman1se11.html" >Next</a></td><td class="clinks"><a 
href="allman1se9.html" >Prev</a></td><td class="clinks"><a 
href="allman1se9.html#tailallman1se9.html" >PrevTail</a></td><td class="clinks"><a 
href="allman1se10.html#tailallman1se10.html">Tail</a></td></tr></table><h3 class="sectionHead"><span class="titlemark">4.3    </span> <a 
 id="x16-360004.3"></a>Property List Functions</h3>
<!--l. 245--><p class="noindent" >A property list is used to associate an id with a set of entities; those entities are called flags if
their use associates a boolean value with the id, and properties if the id is to be associated with
an arbitrary attribute.
<!--l. 256--><p class="noindent" ><div class="minipage"><a 
 id="dx16-36001"></a>
<span 
class="ptmb7t-x-x-120">(put U:id IND:id PROP:any): any                                                                             </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">The indicator IND with the property PROP is placed on the property list of
U. If the action of put occurs, the value of PROP is returned. If either U or
IND are not ids then a type mismatch error occurs.</div>
</div>

<div class="verbatim" id="verbatim-67">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x22C6;&#x22C6;&#x22C6;&#x22C6;&#x22C6;&#x00A0;An&#x00A0;attempt&#x00A0;was&#x00A0;made&#x00A0;to&#x00A0;do&#x00A0;PUT&#x00A0;on&#x00A0;&#8216;U',&#x00A0;which&#x00A0;is&#x00A0;not
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;an&#x00A0;identifier
</div>
<!--l. 260--><p class="nopar" >The definition of a property will cause the previous definition to be lost.
<!--l. 268--><p class="noindent" ><div class="minipage"><a 
 id="dx16-36002"></a>
<span 
class="ptmb7t-x-x-120">(get U:id IND:id): any                                                                                                 </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">Returns the property associated with indicator IND from the property list
of U. If U does not have indicator IND, nil is returned. Get returns nil if U
is not an id.</div></div>
<!--l. 276--><p class="noindent" ><div class="minipage"><a 
 id="dx16-36003"></a>
<span 
class="ptmb7t-x-x-120">(deflist U:list IND:id): list                                                                                            </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">U is a list in which each element is a two-element list: (ID:id PROP:any).
Each  id  in  U  has  the  indicator  IND  with  property  PROP  placed  on  its
property list by the function put function. The value of deflist is a list of the
first elements of each two-element list.</div></div>

<div class="verbatim" id="verbatim-68">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;1&#x00A0;lisp&#x003E;&#x00A0;(deflist&#x00A0;'((plus2&#x00A0;'two)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(plus&#x00A0;'many))
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;'no-operands)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;(plus2&#x00A0;plus)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;2&#x00A0;lisp&#x003E;&#x00A0;(get&#x00A0;'plus&#x00A0;'no-operands)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;many
</div>
<!--l. 284--><p class="nopar" >
<!--l. 290--><p class="noindent" ><div class="minipage"><a 
 id="dx16-36004"></a>
<span 
class="ptmb7t-x-x-120">(remprop U:id IND:id): any                                                                                       </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">Removes  the  property  with  indicator  IND  from  the  property  list  of  U.
Returns the removed property or nil if there was no such indicator.</div>
</div>
<!--l. 294--><p class="noindent" ><div class="minipage"><a 
 id="dx16-36005"></a>
<span 
class="ptmb7t-x-x-120">(rempropl U:id-list IND:id): nil                                                                                  </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">Removes the property IND from all of the ids in U.
</div></div>
<!--l. 296--><p class="noindent" >The following example is intended to illustrate the idea of data driven programming. We define a
function called simplify which will simplify symbolic algebraic expressions. These expressions
are represented as lists. To begin, there will be only one operator (plus), and operands may be
integers, variables or an application of plus. Prefix notation is used. The addition of variable x
and 3 would be represented as (plus x 3). The first version of simplify will certainly do the
job.

<div class="verbatim" id="verbatim-69">
(de&#x00A0;simplify&#x00A0;(expression)
&#x00A0;<br />&#x00A0;&#x00A0;(cond&#x00A0;((atom&#x00A0;expression)&#x00A0;expression)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;((eq&#x00A0;(first&#x00A0;expression&#x00A0;'plus)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(add-simplify&#x00A0;expression))
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(t&#x00A0;expression)))
</div>
<!--l. 312--><p class="nopar" >However, as we add operands it will become necessary to redefine simplify. A better
approach is to allow the operator to specify the information on how to simplify the
expression.

<div class="verbatim" id="verbatim-70">
(de&#x00A0;simplify&#x00A0;(expression)
&#x00A0;<br />&#x00A0;&#x00A0;(cond&#x00A0;((atom&#x00A0;expression)&#x00A0;expression)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(t&#x00A0;(apply&#x00A0;(get&#x00A0;(first&#x00A0;expression)&#x00A0;'simplify)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(ncons&#x00A0;expression)))))
</div>
<!--l. 322--><p class="nopar" >

<div class="verbatim" id="verbatim-71">
(put&#x00A0;'plus&#x00A0;'simplify&#x00A0;'add-simplify)
</div>
<!--l. 325--><p class="nopar" >This version will not have to be rewritten when a new operator is added. For example, if the
operator times is added then we only need to define a function called times-simplify and attach
its name to the property list of times under the indicator simplify. We can design add-simplify in
a similar fashion. Using this approach we will be able to accomodate numbers other than
integers.

<div class="verbatim" id="verbatim-72">
&#x00A0;&#x00A0;(de&#x00A0;add-simplify&#x00A0;(expression)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;(let&#x00A0;((left&#x00A0;(second&#x00A0;expression))
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(right&#x00A0;(third&#x00A0;expression)))
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(cond&#x00A0;((zerop&#x00A0;left)&#x00A0;right)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;((zerop&#x00A0;right)&#x00A0;left)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;((and&#x00A0;(numberp&#x00A0;left)(numberp&#x00A0;right))
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(let&#x00A0;((new&#x00A0;(common-type&#x00A0;left&#x00A0;right)))
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(apply&#x00A0;(get&#x00A0;(data-type&#x00A0;(first&#x00A0;&#x00A0;new))'add-op)&#x00A0;new)))
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(t&#x00A0;(list&#x00A0;(first&#x00A0;expression)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(simplify&#x00A0;left)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(simplify&#x00A0;right))))))
</div>
<!--l. 346--><p class="nopar" >

<div class="verbatim" id="verbatim-73">
(put&#x00A0;'integer&#x00A0;'add-op&#x00A0;'plus2)
</div>
<!--l. 349--><p class="nopar" >

<div class="verbatim" id="verbatim-74">
1&#x00A0;lisp&#x003E;&#x00A0;(simplify&#x00A0;'(plus&#x00A0;(plus&#x00A0;1&#x00A0;8)&#x00A0;(plus&#x00A0;x&#x00A0;0)))
&#x00A0;<br />(plus&#x00A0;9&#x00A0;X)
</div>
<!--l. 353--><p class="nopar" >
<!--l. 355--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">4.3.1    </span> <a 
 id="x16-370004.3.1"></a>Functions for Flagging Ids</h4>
<!--l. 369--><p class="noindent" ><div class="minipage"><a 
 id="dx16-37001"></a>
<span 
class="ptmb7t-x-x-120">(flag U:id-list V:id): nil                                                                                                </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">Flag flags each id in U with V; that is, the effect of flag is that for each id X
in U, (flagp X V) has the value t. Both V and all of the elements of U must
be identifiers or a type mismatch error occurs. The id V will appear on the
property list of each id in U. However, flags cannot be accessed, placed on,
or removed from property lists using the normal property list functions get,
put, and remprop. Note that if an error occurs during execution of flag, then
some of the ids in U may be flagged with V, and others may not be. The
statement below causes the flag Lose to be placed on the property lists of
the ids x and y.</div>
</div>

<div class="verbatim" id="verbatim-75">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;(flag&#x00A0;'(x&#x00A0;y)&#x00A0;'lose)
</div>
<!--l. 372--><p class="nopar" ><div class="minipage"><a 
 id="dx16-37002"></a>
<span 
class="ptmb7t-x-x-120">(flagp U:id V:id): boolean                                                                                            </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">Returns t if U has been flagged with V; otherwise returns nil. Returns NIL
if either U or V is not an id.</div>
</div>
<!--l. 382--><p class="noindent" ><div class="minipage"><a 
 id="dx16-37003"></a>
<span 
class="ptmb7t-x-x-120">(remflag U:id-list V:id): nil                                                                                          </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">Removes the flag V from the property list of each member of the list U.
Both V and all the elements of U must be ids or the type mismatch error
occurs.</div></div>
<!--l. 387--><p class="noindent" ><div class="minipage"><a 
 id="dx16-37004"></a>
<span 
class="ptmb7t-x-x-120">(flag1 U:id V:any): Undefined                                                                                     </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">The identifier U is flagged V. The effect is to add V to the property list of
U.</div></div>
<!--l. 392--><p class="noindent" ><div class="minipage"><a 
 id="dx16-37005"></a>
<span 
class="ptmb7t-x-x-120">(remflag1 U:id V:any): Undefined                                                                              </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">The identifier U is no longer flagged V. The effect is to removed V from the
property list of U.</div>
</div>
<h4 class="subsectionHead"><span class="titlemark">4.3.2    </span> <a 
 id="x16-380004.3.2"></a>Direct Access to the Property Cell</h4>
<!--l. 395--><p class="noindent" >Use of the following functions can destroy the integrity of the property list. Since PSL uses
properties at a low level, care should be taken in the use of these functions.
<!--l. 402--><p class="noindent" ><div class="minipage"><a 
 id="dx16-38001"></a>
<span 
class="ptmb7t-x-x-120">(prop U:id): any                                                                                                           </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">Returns the property list of U.
</div></div>

<!--l. 406--><p class="noindent" ><div class="minipage"><a 
 id="dx16-38002"></a>
<span 
class="ptmb7t-x-x-120">(setprop U:id L:any): L:any                                                                                       </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">Store item L as the property list of U.
</div></div>

<table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li3.html#allman1se10.html" >Up</a></td><td class="clinks"><a 
href="allman1se11.html" >Next</a></td><td class="clinks"><a 
href="allman1se9.html" >Prev</a></td><td class="clinks"><a 
href="allman1se9.html#tailallman1se9.html" >PrevTail</a></td><td class="clinks"><a 
href="allman1se10.html" >Front</a></td></tr></table><a 
 id="tailallman1se10.html"></a>   
</body></html> 
