<!DOCTYPE html> 
<html lang="en-US" xml:lang="en-US" > 
<head><title>RATAPRX: Rational Approximations Package for REDUCE</title> 
<meta  charset="utf-8" /> 
<meta name="generator" content="TeX4ht (https://tug.org/tex4ht/)" /> 
<meta name="viewport" content="width=device-width,initial-scale=1" /> 
<link rel="stylesheet" type="text/css" href="manual.css" /> 
<meta name="src" content="manual.tex" /> 
<script>window.MathJax = { tex: { tags: "ams", }, }; </script> 
 <script type="text/javascript" async="async" id="MathJax-script" src="../../cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"></script>  
<meta name="description" content="The REDUCE Computer Algebra System User's Manual" /> 
</head><body 
>
<header>REDUCE</header><table cellspacing="5"><tr><td class="clinks"><a 
href="../manual-lookup.php%3FUser&#32;Contributed&#32;Packages.html#manualse168.html" >Up</a></td><td class="clinks"><a 
href="manualse169.html" >Next</a></td><td class="clinks"><a 
href="manualse167.html" >Prev</a></td><td class="clinks"><a 
href="manualse167.html#tailmanualse167.html" >PrevTail</a></td><td class="clinks"><a 
href="manualse168.html#tailmanualse168.html">Tail</a></td></tr></table><h3 class="sectionHead"><span class="titlemark">20.45    </span> <a 
 id="x252-103100020.45"></a>RATAPRX: Rational Approximations Package for
REDUCE</h3>
<a 
 id="dx252-1031001"></a>
<a 
 id="dx252-1031002"></a>
<!--l. 926--><p class="noindent" >Authors: Lisa Temme and Wolfram Koepf
<a 
 id="dx252-1031003"></a>
<a 
 id="dx252-1031004"></a>
<a 
 id="dx252-1031005"></a>
<a 
 id="dx252-1031006"></a>
</p><!--l. 5--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.45.1    </span> <a 
 id="x252-103200020.45.1"></a>Periodic Decimal Representation</h4>
<a 
 id="dx252-1032001"></a>
<!--l. 12--><p class="noindent" >The division of one integer by another often results in a period in the decimal
part. The <span 
class="pcrr8t-x-x-109">rational2periodic </span>function in this package can recognise and
represent such an answer in a periodic representation. The inverse function,
<span 
class="pcrr8t-x-x-109">periodic2rational</span>, converts a periodic representation back to a rational
number.
</p><!--l. 19--><p class="noindent" ><a 
 id="operator:RATIONAL2PERIODIC"></a> <a 
 id="operator:PERIODIC2RATIONAL"></a> <a 
 id="operator:PERIODIC"></a> <span class="underline"><span 
class="ptmb8t-x-x-109">Periodic Representation of a Rational Number</span></span>
</p><!--l. 28--><p class="noindent" >
            </p><dl class="list1"><dt class="list">
<span 
class="ptmb8t-x-x-109">SYNTAX:</span>   </dt><dd 
class="list">
            <!--l. 29--><p class="noindent" ><a 
 id="dx252-1032002"></a> <span 
class="pcrr8t-x-x-109">rational2periodic(n);</span><br 
class="newline" /><span 
class="pcrr8t-x-x-109">rational2periodic(n, b);</span>
            </p></dd><dt class="list">
<span 
class="ptmb8t-x-x-109">INPUT:</span>     </dt><dd 
class="list">
            <!--l. 33--><p class="noindent" ><span 
class="pcrr8t-x-x-109">n  </span>is a rational number<br 
class="newline" /><span 
class="pcrr8t-x-x-109">b  </span>is the number base, if absent the default is 10.
            </p></dd><dt class="list">
<span 
class="ptmb8t-x-x-109">RESULT:</span>   </dt><dd 
class="list">
                                                                     

                                                                     
            <!--l. 37--><p class="noindent" ><a 
 id="dx252-1032003"></a> <span 
class="pcrr8t-x-x-109">periodic({a1,...,an},{b1,...,bm},{c1,...,ck},</span>\(\pm {\mathrm {b}}\)<span 
class="pcrr8t-x-x-109">)</span><br 
class="newline" />where <span 
class="pcrr8t-x-x-109">{a1,...,an} </span>is a list of the digits in the integer part,<br 
class="newline" /><span 
class="pcrr8t-x-x-109">{b1,...,bm} </span>is a list of the digits in the non-periodic part,<br 
class="newline" /><span 
class="pcrr8t-x-x-109">{c1,...,ck} </span>is a list of the digits in the periodic part<br 
class="newline" />and \(\pm \)<span 
class="pcrr8t-x-x-109">b </span>where <span 
class="pcrr8t-x-x-109">b </span>is the number base \(2 \leq \mathrm {b} \leq 16\), <br 
class="newline" />a minus indicating the rational number <span 
class="pcrr8t-x-x-109">n </span>was negative.
            </p></dd><dt class="list">
<span 
class="ptmb8t-x-x-109">EXAMPLES:</span> </dt><dd 
class="list">
            <!--l. 45--><p class="noindent" ><br 
class="newline" />\(-59/70\) written as \(-0.8\overline {428571}\)<br 
class="newline" /><span 
class="pcrr8t-x-x-109">1: rational2periodic(-59/70);</span><br 
class="newline" /><span 
class="pcrr8t-x-x-109">   periodic({0}, {8}, {4,2,8,5,7,1}, -10)</span><br 
class="newline" />\(1/80\) written as a hexadecimal is \(0.0\overline {3}\)<br 
class="newline" /><span 
class="pcrr8t-x-x-109">2: rational2periodic(1/80,16);</span><br 
class="newline" /><span 
class="pcrr8t-x-x-109">   periodic({0}, {0}, {3}, 16)</span></p></dd></dl>
<!--l. 54--><p class="noindent" >Normally the operator <span 
class="pcrr8t-x-x-109">periodic </span>will not be seen as the output will be prettyprinted as \(-0.8\overline {428571}\)
and \(0.0\overline {3}\ (\mbox {base }16)\) respectively.
</p><!--l. 58--><p class="noindent" ><span class="underline"><span 
class="ptmb8t-x-x-109">Rational Number of a Periodic Representation</span></span><br 
class="newline" />
     </p><dl class="description"><dt class="description">
     <!--l. 60--><p class="noindent" >
<span 
class="ptmb8t-x-x-109">SYNTAX:</span> </p></dt><dd 
class="description">
     <!--l. 60--><p class="noindent" ><a 
 id="dx252-1032004"></a><br 
class="newline" /><span 
class="pcrr8t-x-x-109">periodic2rational(periodic({a1,...,an},{b1...bm},{c1,...,ck},</span>\(\pm {\mathrm {b}}\)<span 
class="pcrr8t-x-x-109">))</span><br 
class="newline" /><span 
class="pcrr8t-x-x-109">periodic2rational({a1,...,an},{b1...bm},{c1,...,ck},</span>\(\pm {\mathrm {b}}\)<span 
class="pcrr8t-x-x-109">)</span>
     </p></dd><dt class="description">
     <!--l. 64--><p class="noindent" >
<span 
class="ptmb8t-x-x-109">INPUT:</span> </p></dt><dd 
class="description">
     <!--l. 64--><p class="noindent" ><br 
class="newline" /><span 
class="pcrr8t-x-x-109">{a1,...,an} </span>is a list of the digits in the integer part,<br 
class="newline" /><span 
class="pcrr8t-x-x-109">{b1,...,bm} </span>is a list of the digits in the non-periodic part,<br 
class="newline" /><span 
class="pcrr8t-x-x-109">{c1,...,ck} </span>is a list of the digits in the periodic part<br 
class="newline" />and <span 
class="pcrr8t-x-x-109">b </span>is the number base \(2 \leq \mathrm {b} \leq 16\), a minus<br 
class="newline" />indicating the rational number result should be negative. <br 
class="newline" />If the base is omitted, 10 is assumed.
                                                                     

                                                                     
     </p></dd><dt class="description">
     <!--l. 72--><p class="noindent" >
<span 
class="ptmb8t-x-x-109">RESULT:</span> </p></dt><dd 
class="description">
     <!--l. 72--><p class="noindent" ><br 
class="newline" />A rational number.
     </p></dd><dt class="description">
     <!--l. 75--><p class="noindent" >
<span 
class="ptmb8t-x-x-109">EXAMPLES:</span> </p></dt><dd 
class="description">
     <!--l. 75--><p class="noindent" ><br 
class="newline" /> \(0.8\overline {428571}\) written as \(59/70\) <br 
class="newline" /><span 
class="pcrr8t-x-x-109">3: periodic2rational(periodic({0},{8},{4,2,8,5,7,1}));</span><br 
class="newline" /><span 
class="pcrr8t-x-x-109"> 59</span><br 
class="newline" /><span 
class="pcrr8t-x-x-109">----</span><br 
class="newline" /><span 
class="pcrr8t-x-x-109"> 70</span><br 
class="newline" /><span 
class="pcrr8t-x-x-109">4: periodic2rational({0},{8},{4,2,8,5,7,1}, -10);</span><br 
class="newline" /><span 
class="pcrr8t-x-x-109"> </span><span 
class="pcrr8t-x-x-109"> </span><span 
class="pcrr8t-x-x-109"> </span><span 
class="pcrr8t-x-x-109"> 59</span><br 
class="newline" /> <span 
class="pcrr8t-x-x-109">-</span><span 
class="pcrr8t-x-x-109"> ----</span><br 
class="newline" /><span 
class="pcrr8t-x-x-109"> </span><span 
class="pcrr8t-x-x-109"> </span><span 
class="pcrr8t-x-x-109"> </span><span 
class="pcrr8t-x-x-109"> 70</span></p></dd></dl>
<!--l. 89--><p class="noindent" >Note that <span 
class="pcrr8t-x-x-109">periodic2rational </span>will produce the correct rational result when passed a
parameter for the periodic part which is not minimal. Similarly, a parameter for the
periodic part which consists of all 9’s (or in base \(b\), all \((b-1)\)’s) is treated correctly
although such periodic parts are not canonical and are never generated by calls to
<span 
class="pcrr8t-x-x-109">rational2periodic</span>.
</p><!--l. 96--><p class="noindent" >For example,
     </p><blockquote class="quote">
     <!--l. 98--><p class="noindent" ><span 
class="pcrr8t-x-x-109">periodic2rational({0}, {}, {1, 2, 1, 2}); </span><br 
class="newline" /><span 
class="pcrr8t-x-x-109">periodic2rational({0}, {1}, {2, 1}); </span><br 
class="newline" /><span 
class="pcrr8t-x-x-109">periodic2rational({0}, {1, 2}, {1, 2, 1, 2});</span></p></blockquote>
<!--l. 102--><p class="noindent" >all produce the same rational result, namely \(\frac {4}{33}\), as the canonical input
                                                                     

                                                                     
     </p><blockquote class="quote">
     <!--l. 104--><p class="noindent" ><span 
class="pcrr8t-x-x-109">periodic2rational({0}, {}, {1, 2});</span></p></blockquote>
<!--l. 106--><p class="noindent" >Similarly,
     </p><blockquote class="quote">
     <!--l. 108--><p class="noindent" ><span 
class="pcrr8t-x-x-109">periodic2rational({0}, {}, {9}); </span><br 
class="newline" /><span 
class="pcrr8t-x-x-109">periodic2rational({0}, {9}, {9}); </span><br 
class="newline" /><span 
class="pcrr8t-x-x-109">periodic2rational({0}, {}, {9, 9, 9, 9});</span></p></blockquote>
<!--l. 112--><p class="noindent" >all produce the same rational result, namely \(1\), as the canonical input
     </p><blockquote class="quote">
     <!--l. 114--><p class="noindent" ><span 
class="pcrr8t-x-x-109">periodic2rational({1}, {}, {});</span></p></blockquote>
<!--l. 117--><p class="noindent" >Although the operators <span 
class="pcrr8t-x-x-109">periodic2rational </span>and <span 
class="pcrr8t-x-x-109">rational2periodic </span>work
even when <span 
class="pcrr8t-x-x-109">ROUNDED </span>is <span 
class="pcrr8t-x-x-109">ON</span>, they are best used when <span 
class="pcrr8t-x-x-109">ROUNDED </span>is <span 
class="pcrr8t-x-x-109">OFF</span>. The input to
<span 
class="pcrr8t-x-x-109">rational2periodic </span>should not be a rounded number, otherwise an error
results.
</p><!--l. 123--><p class="noindent" >For example, the input <span 
class="pcrr8t-x-x-109">rational2periodic(1/7); </span>will produce the intended
periodic representation even with <span 
class="pcrr8t-x-x-109">ROUNDED ON</span>. However, the input
</p><!--l. 127--><p class="noindent" ><span 
class="pcrr8t-x-x-109">a := 1/7; rational2periodic(a);</span>
</p><!--l. 129--><p class="noindent" >will result in an error as the simpliﬁer is applied in the assignment and rounds the
rational number.
</p><!--l. 132--><p class="noindent" >Similarly, although the result of <span 
class="pcrr8t-x-x-109">periodic2rational </span>will always be a rational
number (represented by a <span 
class="pcrr8t-x-x-109">QUOTIENT </span>preﬁx form), if the simpliﬁer is applied to the
result a rounded value will be produced.
</p><!--l. 140--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.45.2    </span> <a 
 id="x252-103300020.45.2"></a>Continued Fractions</h4>
<a 
 id="dx252-1033001"></a>
<!--l. 143--><p class="noindent" >A continued fraction (see  <span class="cite">[<a 
href="manualap2.html#XJonesThron:80">JT80</a>]</span>) has the general form \[a_0 + \frac {a_1}{b_1 + \frac {a_2}{b_2+ \frac {a_3}{b_3 + \ldots }}} \;.\]
</p><!--l. 152--><p class="noindent" >A more compact way of writing this is as \[a_0 + \frac {a_1|}{|b_1} + \frac {a_2|}{|b_2} + \frac {a_3|}{|b_3} + \ldots \,.\]
                                                                     

                                                                     
</p><!--l. 155--><p class="noindent" >Even more succinctly: \[\{a_0,\ \{a_1, b_1\},\ \{a_2, b_2\},\ \ldots \}\]
<a 
 id="dx252-1033002"></a>
</p><!--l. 160--><p class="noindent" >This is represented in REDUCE as </p>
<div class="center" 
>
<!--l. 161--><p class="noindent" >
</p><!--l. 162--><p class="noindent" ><span 
class="pcrr8t-x-x-109">contfrac(</span><span 
class="pcrro8t-x-x-109">Expression</span><span 
class="pcrr8t-x-x-109">, </span><span 
class="pcrro8t-x-x-109">Rational approximant</span><span 
class="pcrr8t-x-x-109">,</span> \(\{a0, \{a1,b1\}, \{a2,b2\}, \dots \}\)<span 
class="pcrr8t-x-x-109">)</span></p></div>
<!--l. 167--><p class="noindent" ><a 
 id="operator:CFRAC"></a> The operator <span 
class="pcrr8t-x-x-109">cfrac</span><a 
 id="dx252-1033003"></a> is used to generate a generalised continued fraction expansion of
an algebraic expression.
</p><!--l. 172--><p class="noindent" >
  </p><div class="syntax">
  <!--tex4ht:inline--><div class="tabular"> <table id="TBL-156" class="tabular" 
 
><colgroup id="TBL-156-1g"><col 
id="TBL-156-1" /><col 
id="TBL-156-2" /><col 
id="TBL-156-3" /></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-156-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-156-1-1"  
class="td01"><span 
class="pcrr8t-x-x-109">cfrac(</span>\(\langle \)<span 
class="ptmri8t-x-x-109">num</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">)         </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-156-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-156-2-1"  
class="td01"><span 
class="pcrr8t-x-x-109">cfrac(</span>\(\langle \)<span 
class="ptmri8t-x-x-109">num</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">,</span>\(\langle \)<span 
class="ptmri8t-x-x-109">length</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">)    </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-156-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-156-3-1"  
class="td01"><span 
class="pcrr8t-x-x-109">cfrac(</span>\(\langle \)<span 
class="ptmri8t-x-x-109">func</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">,</span>\(\langle \)<span 
class="ptmri8t-x-x-109">var</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">)     </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-156-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-156-4-1"  
class="td01"><span 
class="pcrr8t-x-x-109">cfrac(</span>\(\langle \)<span 
class="ptmri8t-x-x-109">func</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">,</span>\(\langle \)<span 
class="ptmri8t-x-x-109">var</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">,</span>\(\langle \)<span 
class="ptmri8t-x-x-109">length</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">)</span></td></tr></table>
  </div></div>
<!--l. 181--><p class="noindent" ><span 
class="ptmb8t-x-x-109">INPUT:</span><br 
class="newline" />\(\langle \)<span 
class="ptmri8t-x-x-109">num</span>\(\rangle \)  is any real number<br 
class="newline" />\(\langle \)<span 
class="ptmri8t-x-x-109">func</span>\(\rangle \)  is a function<br 
class="newline" />\(\langle \)<span 
class="ptmri8t-x-x-109">var</span>\(\rangle \)  is the function main variable<br 
class="newline" />\(\langle \)<span 
class="ptmri8t-x-x-109">length</span>\(\rangle \)  is the maximum number of terms (continuents) to be generated and is
<span 
class="ptmb8t-x-x-109">optional</span>.
</p><!--l. 188--><p class="noindent" >For non-rational function or irrational number input the \(\langle \)<span 
class="ptmri8t-x-x-109">length</span>\(\rangle \) argument speciﬁes the
number of continuents (ordered pairs, \(\{a_i,b_i\}\)), to be returned. Its default value is ﬁve. For
rational function or rational number input the <span 
class="pcrr8t-x-x-109">length </span>argument can only truncate the
answer, it cannot return additional pairs even if the precision is increased. The
default for rational function or rational number input is the complete continued
fraction.
</p><!--l. 197--><p class="noindent" ><a 
 id="switch:CF_TAYLOR"></a> <a 
 id="dx252-1033004"></a>
</p><!--l. 200--><p class="noindent" >For a non-rational function, power series expansion is necessary. The new switch
<span 
class="pcrr8t-x-x-109">cf_taylor </span>controls whether the <span 
class="ptmrc8t-x-x-109">T<span 
class="small-caps">A</span><span 
class="small-caps">Y</span><span 
class="small-caps">L</span><span 
class="small-caps">O</span><span 
class="small-caps">R</span> </span>or the <span 
class="ptmrc8t-x-x-109">T<span 
class="small-caps">P</span><span 
class="small-caps">S</span> </span>package is used to produce the
power series required. By default this switch is OFF and so the <span 
class="ptmrc8t-x-x-109">T<span 
class="small-caps">P</span><span 
class="small-caps">S</span> </span>package is normally
employed. In most cases the choice is not important, but the TPS option is somewhat
better at handling cases where the series expansion is rather sparse. In a few
cases TPS may fail to produce a series expansion when TAYLOR succeeds and
vice-versa.
</p><!--l. 209--><p class="noindent" >For numerical input the default value is exact for rational number arguments whilst for
irrational or rounded input it is dependent on the precision of the session. The <span 
class="pcrr8t-x-x-109">length</span>
                                                                     

                                                                     
argument will only take eﬀect if is smaller than the number of ordered pairs which the
default value would return.
</p><!--l. 215--><p class="noindent" >If the number of continuent pairs returned does not exceed twelve, the result will usually
be pretty-printed as a two element list consisting of the convergent followed by a
rendering of the traditional continued fraction expansion. For a larger number of pairs the
output is of the second element is printed as a list of pairs. Thus, usually the operator
<span 
class="pcrr8t-x-x-109">contfrac </span>is not seen in the output.
</p><!--l. 223--><p class="noindent" ><span 
class="ptmb8t-x-x-120">EXAMPLES</span>
                                                                     

                                                                     
</p>
<pre class="verbatim" id="verbatim-1282">
cfrac(pi, 4);

     355             1
{pi,-----,3 + ----------------}
     113               1
               7 + ----------
                          1
                    15 + ---
                          1

cfrac(sqrt 2, 5);

          41                1
{sqrt(2),----,1 + ---------------------}
          29                  1
                   2 + ---------------
                                1
                        2 + ---------
                                  1
                             2 + ---
                                  2

cfrac(23.696, 4);

  2962   237              1
{------,-----,23 + ---------------}
  125    10                 1
                    1 + ---------
                              1
                         2 + ---
                              3

cfrac((x+2/3)^2/(6*x-5), x, 10);

     2
  9*x  + 12*x + 4
{-----------------,   exact,
     54*x - 45
                                                                     

                                                                     

   6*x + 13          1
 ---------- + -------------}
     36         24*x - 20
               -----------
                    9

cfrac(e^x, x);


       3      2
  x   x  + 9*x  + 36*x + 60
{e , -----------------------,
           2
        3*x  - 24*x + 60

                  x
 1 + ---------------------------}
                    x
      1 - ---------------------
                      x
           2 + ---------------
                        x
                3 - ---------
                          x
                     2 + ---
                          5
</pre>
<!--l. 290--><p class="nopar" >
</p><!--l. 292--><p class="noindent" ><a 
 id="operator:CF"></a>
</p><!--l. 294--><p class="noindent" >The operator <span 
class="pcrr8t-x-x-109">CF</span><a 
 id="dx252-1033005"></a> is a synonym for the operator <span 
class="pcrr8t-x-x-109">continued_fraction</span><a 
 id="dx252-1033006"></a>.
  </p><div class="syntax">
  <!--tex4ht:inline--><div class="tabular"> <table id="TBL-157" class="tabular" 
 
><colgroup id="TBL-157-1g"><col 
id="TBL-157-1" /><col 
id="TBL-157-2" /><col 
id="TBL-157-3" /></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-157-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-157-1-1"  
class="td01"><span 
class="pcrr8t-x-x-109">cf(</span>\(\langle \)<span 
class="ptmri8t-x-x-109">num</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">)           </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-157-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-157-2-1"  
class="td01"><span 
class="pcrr8t-x-x-109">cf(</span>\(\langle \)<span 
class="ptmri8t-x-x-109">num</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">,</span>\(\langle \)<span 
class="ptmri8t-x-x-109">size</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">)        </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-157-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-157-3-1"  
class="td01"><span 
class="pcrr8t-x-x-109">cf(</span>\(\langle \)<span 
class="ptmri8t-x-x-109">num</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">,</span>\(\langle \)<span 
class="ptmri8t-x-x-109">size</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">,</span>\(\langle \)<span 
class="ptmri8t-x-x-109">numterms</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">)</span></td></tr></table>
  </div></div>
<!--l. 303--><p class="noindent" >The meaning of the arguments is the same as for the operator <span 
class="pcrr8t-x-x-109">continued_fraction</span>:
the original number to be expanded \(\langle \)<span 
class="ptmri8t-x-x-109">num</span>\(\rangle \), an optional maximum size \(\langle \)<span 
class="ptmri8t-x-x-109">size</span>\(\rangle \) permitted for
the denominator of the convergent and an optional maximum number of continuents
\(\langle \)<span 
class="ptmri8t-x-x-109">numterms</span>\(\rangle \) to be generated.
</p><!--l. 309--><p class="noindent" >The output is in the same format as that of <span 
class="pcrr8t-x-x-109">cfrac </span>described above. As with the operator
<span 
class="pcrr8t-x-x-109">cfrac </span>output of <span 
class="pcrr8t-x-x-109">CF </span>is normally pretty-printed so the operator <span 
class="pcrr8t-x-x-109">confract </span>will not be
                                                                     

                                                                     
seen.
</p><!--l. 313--><p class="noindent" ><a 
 id="operator:CF_EXPRESSION"></a> <a 
 id="operator:CF_CONTINUENTS"></a> <a 
 id="operator:CF_CONVERGENT"></a> <a 
 id="operator:CF_CONVERGENTS"></a>
</p><!--l. 318--><p class="noindent" >The accessor operators <a 
 id="dx252-1033007"></a><span 
class="pcrr8t-x-x-109">cf_expression</span>, <a 
 id="dx252-1033008"></a><span 
class="pcrr8t-x-x-109">cf_convergent </span>and <a 
 id="dx252-1033009"></a><span 
class="pcrr8t-x-x-109">cf_continuents</span>
allow the various parts of a continued fraction object \(\langle \)<span 
class="ptmri8t-x-x-109">cf_object</span>\(\rangle \) (as returned by any of the
operators <span 
class="pcrr8t-x-x-109">cf</span>, <span 
class="pcrr8t-x-x-109">cfrac</span>, <span 
class="pcrr8t-x-x-109">continued_fraction </span>and <span 
class="pcrr8t-x-x-109">cf_euler</span>) to be extracted.
<a 
 id="dx252-1033010"></a>
</p><!--l. 326--><p class="noindent" >These three operators return, respectively, the originating expression of the continued
fraction object, the last convergent of the continued fraction, a list of its continuents (that
is a list of pairs of partial numerators and denominators).
</p><!--l. 331--><p class="noindent" >The operator <span 
class="pcrr8t-x-x-109">cf_convergents</span><a 
 id="dx252-1033011"></a> returns a list of all the convergents of the
expansion.
  </p><div class="syntax">
  <!--tex4ht:inline--><div class="tabular"> <table id="TBL-158" class="tabular" 
 
><colgroup id="TBL-158-1g"><col 
id="TBL-158-1" /><col 
id="TBL-158-2" /><col 
id="TBL-158-3" /></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-158-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-158-1-1"  
class="td01"><span 
class="pcrr8t-x-x-109">cf_expression(</span>\(\langle \)<span 
class="ptmri8t-x-x-109">cf_object</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">) </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-158-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-158-2-1"  
class="td01"><span 
class="pcrr8t-x-x-109">cf_convergent(</span>\(\langle \)<span 
class="ptmri8t-x-x-109">cf_object</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">) </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-158-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-158-3-1"  
class="td01"><span 
class="pcrr8t-x-x-109">cf_continuents(</span>\(\langle \)<span 
class="ptmri8t-x-x-109">cf_object</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">)</span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-158-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-158-4-1"  
class="td01"><span 
class="pcrr8t-x-x-109">cf_convergents(</span>\(\langle \)<span 
class="ptmri8t-x-x-109">cf_object</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">)</span></td></tr></table>
  </div></div>
<!--l. 340--><p class="noindent" ><span 
class="ptmb8t-x-x-120">EXAMPLES</span>
                                                                     

                                                                     
</p>
<pre class="verbatim" id="verbatim-1283">
2: cf(6/11);

  6    6          1
{----,----,---------------}
  11   11           1
            1 + ---------
                      1
                 1 + ---
                      5

3: a := cf(pi,1000);

          355             1
a := {pi,-----,3 + ----------------}
          113               1
                    7 + ----------
                               1
                         15 + ---
                               1

4: cf_convergents a;

    22   333   355
{3,----,-----,-----}
    7    106   113

5: cf_continuents a;

{3,7,15,1}

6: precision 20;

12

7: cf pi;

     21053343141
{pi,-------------,{3,7,15,1,292,1,1,1,2,1,3,1,14,2,1,1,2,2,2,2,1}}
                                                                     

                                                                     
     6701487259
</pre>
<!--l. 381--><p class="nopar" >
<a 
 id="dx252-1033012"></a>
</p><!--l. 384--><p class="noindent" ><a 
 id="operator:CF_EULER"></a> The operator <span 
class="pcrr8t-x-x-109">cf_euler </span>is used to generate a generalised continued fraction
expansion of an algebraic expression using a formula due to Leonhard Euler
( <span class="cite">[<a 
href="manualap2.html#XEuler:1748">Eul48</a>]</span>).
  </p><div class="syntax">
  <!--tex4ht:inline--><div class="tabular"> <table id="TBL-159" class="tabular" 
 
><colgroup id="TBL-159-1g"><col 
id="TBL-159-1" /><col 
id="TBL-159-2" /><col 
id="TBL-159-3" /></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-159-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-159-1-1"  
class="td01"><span 
class="pcrr8t-x-x-109">cf_euler(</span>\(\langle \)<span 
class="ptmri8t-x-x-109">func</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">,</span>\(\langle \)<span 
class="ptmri8t-x-x-109">var</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">)     </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-159-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-159-2-1"  
class="td01"><span 
class="pcrr8t-x-x-109">cf_euler(</span>\(\langle \)<span 
class="ptmri8t-x-x-109">func</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">,</span>\(\langle \)<span 
class="ptmri8t-x-x-109">var</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">,</span>\(\langle \)<span 
class="ptmri8t-x-x-109">length</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">)</span></td></tr></table>
  </div></div>
<!--l. 395--><p class="noindent" ><span 
class="ptmb8t-x-x-109">INPUT:</span><br 
class="newline" />\(\langle \)<span 
class="ptmri8t-x-x-109">func</span>\(\rangle \) is a function<br 
class="newline" />\(\langle \)<span 
class="ptmri8t-x-x-109">var</span>\(\rangle \)  is the function main variable<br 
class="newline" />\(\langle \)<span 
class="ptmri8t-x-x-109">length</span>\(\rangle \)  is the maximum number of continuents to be generated and is <span 
class="ptmb8t-x-x-109">optional</span>.
</p><!--l. 401--><p class="noindent" >The meaning of the parameters is similar to those of <span 
class="pcrr8t-x-x-109">cfrac</span>, but the continued fraction
expansion generated will usually be diﬀerent. Note that unlike <span 
class="pcrr8t-x-x-109">cfrac</span>, <span 
class="pcrr8t-x-x-109">cf_euler</span>
cannot currently generate continued fraction expansion of numbers and for a rational
function argument (with a non-constant denominator) the expansion will not be
exact.
</p><!--l. 407--><p class="noindent" ><a 
 id="operator:CF_UNIT_NUMERATORS"></a> <a 
 id="operator:CF_UNIT_DENOMINATORS"></a> <a 
 id="operator:CF_REMOVE_FRACTIONS"></a> <a 
 id="operator:CF_REMOVE_CONSTANT"></a> A number of operators are provided for transforming their continued fraction argument
\(\langle \)<span 
class="ptmri8t-x-x-109">cf_object</span>\(\rangle \) into an equivalent expansion, that is one with exactly the same convergents.
They all accept as their single argument any continued fraction object \(\langle \)<span 
class="ptmri8t-x-x-109">cf_object</span>\(\rangle \). These
are:
</p><!--l. 418--><p class="noindent" ><span 
class="pcrr8t-x-x-109">cf_unit_denominators</span><a 
 id="dx252-1033013"></a><br 
class="newline" />converts all partial denominators to 1.<br 
class="newline" /> <span 
class="pcrr8t-x-x-109">cf_unit_numerators</span><a 
 id="dx252-1033014"></a><br 
class="newline" />converts all partial numerators to 1.<br 
class="newline" /> <span 
class="pcrr8t-x-x-109">cf_remove_fractions</span><a 
 id="dx252-1033015"></a><br 
class="newline" />converts the denominators of the partial numerators and partial denominators in the
continuents to 1.<br 
class="newline" /> <span 
class="pcrr8t-x-x-109">cf_remove_constant</span><a 
 id="dx252-1033016"></a><br 
class="newline" />removes the zeroth continuent (if non-zero) absorbing it into the ﬁrst continuent
pair.
                                                                     

                                                                     
</p><!--l. 429--><p class="noindent" ><a 
 id="operator:CF_TRANSFORM"></a> The operator <span 
class="pcrr8t-x-x-109">cf_transform</span><a 
 id="dx252-1033017"></a> is a general purpose function for transforming its
continued fraction argument \(\langle \)<span 
class="ptmri8t-x-x-109">cf_object</span>\(\rangle \) into an equivalent expansion. Unlike the four
preceding operators it requires a second argument: a list of multipliers used to modify the
partial numerators and denominators of the original expansion.
  </p><div class="syntax">
  <!--tex4ht:inline--><div class="tabular"> <table id="TBL-160" class="tabular" 
 
><colgroup id="TBL-160-1g"><col 
id="TBL-160-1" /><col 
id="TBL-160-2" /><col 
id="TBL-160-3" /></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-160-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-160-1-1"  
class="td01"><span 
class="pcrr8t-x-x-109">cf_transform(</span>\(\langle \)<span 
class="ptmri8t-x-x-109">cf_object</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">,</span>\(\langle \)<span 
class="ptmri8t-x-x-109">multiplier-list</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">)</span></td></tr></table>
  </div></div>
<!--l. 440--><p class="noindent" >To understand the operation of <span 
class="pcrr8t-x-x-109">cf_transform </span>consider ﬁrst the special case where
\(\langle \)<span 
class="ptmri8t-x-x-109">multiplier-list</span>\(\rangle \) is a list of the form \(\{1, 1, \ldots , 1, l_n, 1, \ldots , 1\}\) whose nth element is \(l_n\). Only the nth continuent pair \(\{a_n,\ b_n\}\)
and (n+1)th partial numerator \(a_{n+1}\) are altered and become \(\{l_na_n,\ l_nb_n\}\) and \(l_na_{n+1}\) respectively. For a
\(\langle \)<span 
class="ptmri8t-x-x-109">multiplier-list</span>\(\rangle \) that has more than one non-unit element, the above transformations are
applied sequentially from left to right.
</p><!--l. 449--><p class="noindent" >If the number of continuent pairs in the \(\langle \)<span 
class="ptmri8t-x-x-109">cf_object</span>\(\rangle \) is greater than the length of the
\(\langle \)<span 
class="ptmri8t-x-x-109">multiplier-list</span>\(\rangle \), the latter is (in eﬀect) padded with 1’s. Conversely if it is shorter, the
surplus elements of \(\langle \)<span 
class="ptmri8t-x-x-109">multiplier-list</span>\(\rangle \) are ignored.
</p><!--l. 454--><p class="noindent" ><a 
 id="operator:CF_EVEN_ODD"></a> The operator <span 
class="pcrr8t-x-x-109">cf_even_odd</span><a 
 id="dx252-1033018"></a> splits its continued fraction argument \(\langle \)<span 
class="ptmri8t-x-x-109">cf_object</span>\(\rangle \) into two
continued fraction objects: namely its even and odd parts (in that order) which are
returned as a two-element list.
  </p><div class="syntax">
  <!--tex4ht:inline--><div class="tabular"> <table id="TBL-161" class="tabular" 
 
><colgroup id="TBL-161-1g"><col 
id="TBL-161-1" /><col 
id="TBL-161-2" /><col 
id="TBL-161-3" /></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-161-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-161-1-1"  
class="td01"><span 
class="pcrr8t-x-x-109">cf_even_odd(</span>\(\langle \)<span 
class="ptmri8t-x-x-109">cf_object</span>\(\rangle \)<span 
class="pcrr8t-x-x-109">)</span></td></tr></table>
  </div></div>
<!--l. 462--><p class="noindent" >The convergents of the even part are the even-numbered convergents of the original
expansion and those of the odd part are the odd-numbered ones (except the zeroth
convergent which is necessarily zero). For the continued fraction expansions
generated by the operators <span 
class="pcrr8t-x-x-109">cf </span>and <span 
class="pcrr8t-x-x-109">cfrac </span>with a numerical ﬁrst argument \(\langle \)<span 
class="ptmri8t-x-x-109">num</span>\(\rangle \).
The convergents of the even part form a monotonically increasing sequence
whilst those of the odd part (after the zeroth) form a monotonically decreasing
sequence.
</p><!--l. 470--><p class="noindent" ><span 
class="ptmb8t-x-x-120">EXAMPLES</span>
                                                                     

                                                                     
</p>
<pre class="verbatim" id="verbatim-1284">
cf_remove_fractions(cf_euler(e^x, x, 4));

        3      2
  x    x  + 3*x  + 6*x + 6
{e , ---------------------,
              6

                   1
 -------------------------------------}
                     x
  1 - -------------------------------
                          x
       (x + 1) - -------------------
                              2*x
                  (x + 2) - -------
                             x + 3

a := cf_remove_fractions(cf_euler(4*atan x, x, 4));

a := {4*atan(x),

              7       5        3
        - 60*x  + 84*x  - 140*x  + 420*x
      -----------------------------------,
                      105

                               4*x
      -----------------------------------------------------}
                                  2
                                 x
       1 + -----------------------------------------------
                                          2
                 2                     9*x
            ( - x  + 3) + -------------------------------
                                                   2
                                  2            25*x
                           ( - 3*x  + 5) + -------------
                                                  2
                                                                     

                                                                     
                                             - 5*x  + 7

b := (a where x =&#x003E; 1);

          304            4
b := {pi,-----,----------------------}
          105              1
                1 + ----------------
                             9
                     2 + ----------
                               25
                          2 + ----
                               2

c := cf(pi, 0, 6);

          104348                    1
c := {pi,--------,3 + ------------------------------}
          33215                       1
                       7 + ------------------------
                                         1
                            15 + -----------------
                                           1
                                  1 + -----------
                                              1
                                       292 + ---
                                              1

cf_remove_constant c;

     104348                22
{pi,--------,-------------------------------}
     33215                    1
              7 + -------------------------
                                22
                   333 + -----------------
                                   1
                          1 + -----------
                                      1
                               292 + ---
                                      1

c:= cf(pi, 0, 8)$
d := cf_even_odd c;
                                                                     

                                                                     

           208341                15
d := {{pi,--------,3 + ----------------------},
           66317                   292
                        106 - --------------
                                       15
                               4687 - -----
                                       585

           312689             22
      {pi,--------,-------------------------}}
           99532                 1
                    7 + -------------------
                                   22
                         355 - -----------
                                       1
                                294 - ---
                                       3
cf_convergents c;

    22   333   355   103993   104348   208341   312689
{3,----,-----,-----,--------,--------,--------,--------}
    7    106   113   33102    33215    66317    99532

cf_convergents first d;

    333   103993   208341
{3,-----,--------,--------}
    106   33102    66317

cf_convergents second d;

    22   355   104348   312689
{0,----,-----,--------,--------}
    7    113   33215    99532
</pre>
<!--l. 589--><p class="nopar" >
</p><!--l. 592--><p class="noindent" >
</p>
<h4 class="subsectionHead"><span class="titlemark">20.45.3    </span> <a 
 id="x252-103400020.45.3"></a>Padé Approximation</h4>
                                                                     

                                                                     
<a 
 id="dx252-1034001"></a>
<!--l. 595--><p class="noindent" >The Padé approximant represents a function by the ratio of two polynomials. The
coeﬃcients of the powers occuring in the polynomials are determined by the
coeﬃcients in the Taylor series expansion of the function (see  <span class="cite">[<a 
href="manualap2.html#XBakerGravesMorris:81">BGM96</a>]</span>).
Given a power series \[ f(x) = c_0 + c_1 (x-h) + c_2 (x-h)^2 \ldots \] and the degree of numerator, \(n\), and of the denominator,
\(d\), the <span 
class="pcrr8t-x-x-109">pade </span>function ﬁnds the unique coeﬃcients \(a_i,\, b_i\) in the Padé approximant
\[ \frac {a_0+a_1 x+ \cdots + a_n x^n}{b_0+b_1 x+ \cdots + b_d x^d} \; .\]
</p><!--l. 605--><p class="noindent" ><a 
 id="operator:PADE"></a> <a 
 id="dx252-1034002"></a> <span 
class="ptmb8t-x-x-109">SYNTAX: </span>       <span 
class="pcrr8t-x-x-109">pade(f, x, h, n, d);</span><br 
class="newline" />
</p><!--l. 609--><p class="noindent" ><span 
class="ptmb8t-x-x-109">INPUT:</span><br 
class="newline" /> <span 
class="pcrr8t-x-x-109">f</span>        the funtion to be approximated<br 
class="newline" /><span 
class="pcrr8t-x-x-109">x</span>        the function variable<br 
class="newline" /><span 
class="pcrr8t-x-x-109">h</span>        the point at which the approximation is evaluated<br 
class="newline" /><span 
class="pcrr8t-x-x-109">n</span>        the (speciﬁed) degree of the numerator<br 
class="newline" /><span 
class="pcrr8t-x-x-109">d</span>        the (speciﬁed) degree of the denominator<br 
class="newline" /> <span 
class="ptmb8t-x-x-109">RESULT: </span><br 
class="newline" />Padé Approximant, ie. a rational function.<br 
class="newline" />
</p><!--l. 618--><p class="noindent" ><span 
class="ptmb8t-x-x-109">ERROR MESSAGES:</span><br 
class="newline" />
</p><!--l. 620--><p class="noindent" >        <span 
class="pcrr8t-x-x-109">***** not yet implemented</span><br 
class="newline" />
</p><!--l. 622--><p class="noindent" >The Taylor series expansion for the function, f, has not yet been implemented in the
REDUCE Taylor Package.<br 
class="newline" />
</p><!--l. 625--><p class="noindent" >        <span 
class="pcrr8t-x-x-109">***** no Pade Approximation exists</span><br 
class="newline" />
</p><!--l. 627--><p class="noindent" >A Padé Approximant of this function does not exist.<br 
class="newline" />
</p><!--l. 630--><p class="noindent" >        <span 
class="pcrr8t-x-x-109">***** Pade Approximation of this order does not</span>
<span 
class="pcrr8t-x-x-109">exist</span><br 
class="newline" />
</p><!--l. 632--><p class="noindent" >A Padé Approximant of this order (ie. the speciﬁed numerator and denominator orders)
does not exist but one of a diﬀerent order may exist.<br 
class="newline" />
</p><!--l. 636--><p class="noindent" ><span 
class="ptmb8t-x-x-120">EXAMPLES</span>
                                                                     

                                                                     
</p>
<pre class="verbatim" id="verbatim-1285">
23: pade(sin(x),x,0,3,3);

          2
 x*( - 7*x  + 60)
------------------
       2
   3*(x  + 20)

24: pade(tanh(x),x,0,5,5);

     4        2
 x*(x  + 105*x  + 945)
-----------------------
      4       2
 15*(x  + 28*x  + 63)

25: pade(atan(x),x,0,5,5);

        4        2
 x*(64*x  + 735*x  + 945)
--------------------------
         4       2
 15*(15*x  + 70*x  + 63)

26: pade(exp(1/x),x,0,5,5);

***** no Pade Approximation exists

27: pade(factorial(x),x,1,3,3);

***** not yet implemented

28: pade(asech(x),x,0,3,3);

            2                        2                 2
- 3*log(x)*x  + 8*log(x) + 3*log(2)*x  - 8*log(2) + 2*x
--------------------------------------------------------
                          2
                                                                     

                                                                     
                       3*x  - 8

29: taylor(ws-asech(x),x,0,10);

               11
log(x)*(0 + O(x  ))

     13    6     43    8    1611    10      11
 + (-----*x  + ------*x  + -------*x   + O(x  ))
     768        2048        81920

30: pade(sin(x)/x^2,x,0,10,0);

***** Pade Approximation of this order does not exist

31:  pade(sin(x)/x^2,x,0,10,2);

     10        8         6           4            2
( - x   + 110*x  - 7920*x  + 332640*x  - 6652800*x

  + 39916800)/(39916800*x)

32: pade(exp(x),x,0,10,10);

  10        9         8           7            6
(x   + 110*x  + 5940*x  + 205920*x  + 5045040*x

              5               4                3
  + 90810720*x  + 1210809600*x  + 11762150400*x

                 2
  + 79394515200*x  + 335221286400*x + 670442572800)/

      10        9         8           7            6
    (x   - 110*x  + 5940*x  - 205920*x  + 5045040*x

                     5               4
         - 90810720*x  + 1210809600*x

                        3               2
         - 11762150400*x + 79394515200*x

         - 335221286400*x + 670442572800)

                                                                     

                                                                     
33: pade(sin(sqrt(x)),x,0,3,3);

(sqrt(x)*
            3            2
  (56447*x  - 4851504*x  + 132113520*x - 885487680))\

              3         2
    (7*(179*x  - 7200*x  - 2209680*x - 126498240))
</pre>
<!--l. 729--><p class="nopar" >
</p><!--l. 930--><p class="noindent" >
                                                                     

                                                                     
                                                                     

                                                                     
</p><!--l. 932--><p class="noindent" ><table cellspacing="5"><tr><td class="clinks"><a 
href="../manual-lookup.php%3FUser&#32;Contributed&#32;Packages.html#manualse168.html" >Up</a></td><td class="clinks"><a 
href="manualse169.html" >Next</a></td><td class="clinks"><a 
href="manualse167.html" >Prev</a></td><td class="clinks"><a 
href="manualse167.html#tailmanualse167.html" >PrevTail</a></td><td class="clinks"><a 
href="manualse168.html" >Front</a></td></tr></table><a 
 id="tailmanualse168.html"></a>  <hr> <p style="font-family:sans-serif">Hosted by <a href="https://sourceforge.net/p/reduce-algebra/"> <img title="Download REDUCE" alt="Download REDUCE" style="vertical-align:middle" src="https://sourceforge.net/sflogo.php?type=16&amp;group_id=248416"/></a> <a href="https://www.mathjax.org"> <img title="Powered by MathJax" alt="Powered by MathJax" style="float:right" src="https://www.mathjax.org/badge/badge.gif"/></a></p></p> 
</body> 
</html>