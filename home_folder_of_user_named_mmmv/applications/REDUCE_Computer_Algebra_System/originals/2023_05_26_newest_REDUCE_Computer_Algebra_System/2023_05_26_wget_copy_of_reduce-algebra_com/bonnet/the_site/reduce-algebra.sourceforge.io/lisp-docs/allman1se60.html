<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Compiling Files</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,html --> 
<meta name="src" content="allman1.tex"> 
<meta name="date" content="2014-05-02 18:10:00"> 
<link rel="stylesheet" type="text/css" href="allman1.css"> 
</head><body 
>
<p align="centre"><img src="https://reduce-algebra.sourceforge.io/lisp-docs/redlogo.png" width=621 height=60 border=0 alt="REDUCE"></p><table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li14.html#allman1se60.html" >Up</a></td><td class="clinks"><a 
href="allman1se61.html" >Next</a></td><td class="clinks"><a 
href="allman1se59.html" >Prev</a></td><td class="clinks"><a 
href="allman1se59.html#tailallman1se59.html" >PrevTail</a></td><td class="clinks"><a 
href="allman1se60.html#tailallman1se60.html">Tail</a></td></tr></table><h3 class="sectionHead"><span class="titlemark">15.2    </span> <a 
 id="x77-16100015.2"></a>Compiling Files</h3>
<!--l. 36--><p class="noindent" >It is best to compile files using <span 
class="pcrr7t-x-x-120">pslcomp</span>, a minimal version of PSL capable of compiling files.
The successful compilation of a file should not depend upon optional modules which have been
loaded. On some computer systems the names of the files to be compiled can be listed as
command line arguments. When PSLCOMP is brought up the following banner is
displayed.
<!--l. 43--><p class="noindent" >Portable Standard Lisp Compiler<br 
class="newline" />Usage: PSLCOMP source-file ...
<!--l. 46--><p class="noindent" >If an error occurs, the message

<div class="verbatim" id="verbatim-333">
&#x22C6;&#x22C6;&#x22C6;&#x22C6;&#x22C6;&#x00A0;Error&#x00A0;during&#x00A0;compilation&#x00A0;of&#x00A0;NAME
</div>
<!--l. 49--><p class="nopar" >is printed and the compilation is aborted.
<!--l. 64--><p class="noindent" ><div class="minipage"><a 
 id="dx77-161001"></a>
<span 
class="ptmb7t-x-x-120">(compile-file FILE:string): </span><span 
class="cmsy-10x-x-120">{</span><span 
class="ptmb7t-x-x-120">t, nil, abort</span><span 
class="cmsy-10x-x-120">}                      </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">This  function  is  used  to  compile  files.  A  binary  file  is  created  with  the
same name except that the file type is changed to <span 
class="ptmb7t-x-x-120">b</span>. Beware, it is possible
to overwrite the source file if the operating system truncates file names (this
can be avoided by using compile-file-aux, described below). If the file name
is without  a  suffix  then  <span 
class="ptmb7t-x-x-120">sl  </span>is  assumed.  This  function  will  return  t  if  the
compilation was successful, abort if after an error was signalled the user
aborted the compilation, or nil if the source file was not found. When the
source file cannot be found the message</div>
</div>

<div class="verbatim" id="verbatim-334">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x22C6;&#x22C6;&#x22C6;&#x22C6;&#x22C6;&#x00A0;Unable&#x00A0;to&#x00A0;find&#x00A0;source&#x00A0;file&#x00A0;for:&#x00A0;FILE
</div>
<!--l. 67--><p class="nopar" >will be printed. Prior to the compilation the message

<div class="verbatim" id="verbatim-335">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;-----&#x00A0;Compiling&#x00A0;SOURCE-FILE&#x00A0;to&#x00A0;BINARY-FILE
</div>
<!--l. 72--><p class="nopar" >is displayed. In addition, one of the following two messages will be printed when compilation
has stopped.

<div class="verbatim" id="verbatim-336">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;-----&#x00A0;Compilation&#x00A0;of&#x00A0;NAME&#x00A0;completed
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;-----&#x00A0;Compilation&#x00A0;of&#x00A0;NAME&#x00A0;aborted
</div>
<!--l. 80--><p class="nopar" >
<!--l. 92--><p class="noindent" ><div class="minipage"><a 
 id="dx77-161002"></a>
<span 
class="ptmb7t-x-x-120">(compile-file-aux SOURCE:string BINARY:string):</span><br 
class="newline" /><span 
class="cmsy-10x-x-120">{</span><span 
class="ptmb7t-x-x-120">t, nil, abort</span><span 
class="cmsy-10x-x-120">}                                     </span><span 
class="ptmri7t-x-x-120">expr</span>
<br 
class="newline" /><div class="minipage">Since this function is used by compile-file to compile files, most of the
comments concerning compile-file apply to compile-file-aux. Although one
application  of  compile-file  may  be  used  to  compile  a  number  of  files,
with this function only one file can be compiled. The advantage of using
compile-file-aux is that the name of the binary file is given explicitly.</div>
</div>
<!--l. 94--><p class="noindent" >During the compilation of a file, if an atomic expression is read at the top level the

<div class="verbatim" id="verbatim-337">
&#x22C6;&#x22C6;&#x22C6;&#x00A0;Warning:&#x00A0;non-list&#x00A0;form&#x00A0;ignored:&#x00A0;ATOM
</div>
<!--l. 99--><p class="nopar" >will be displayed and the expression will be ignored. A list whose first element is
not atomic is saved for insertion into the an initialization function which is added
to the binary file by the compiler (its name is **fasl**initcode**). The processing
of a list whose first element is an id depends in large part upon values found on the
property list of the id. The EVAL flag will cause the expression to be evaluated, using the
current binding of toploopeval*, and compiled. The expression is only evaluated, again
using the current binding of toploopeval*, if the id is flagged IGNORE. All other
expressions are compiled. Compilation will modify the environment, in particular,
all macro definitions are installed. Note that although defflavor is a macro it does
not create a macro definition. It will however modify the property list of the flavor
name.
<!--l. 115--><p class="noindent" >As expressions are processed a list of expressions is built. When a function definition is made an
application of putd is added to the list. Other expressions which are intended to be evaluated at
load time were also added. This sequence of instructions, which preserves the order in which
expressions were read, is compiled as the body of the initialization function (named
**fasl**initcode**).
<!--l. 123--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">15.2.1    </span> <a 
 id="x77-16200015.2.1"></a>Order of Functions for Compilation</h4>
<!--l. 125--><p class="noindent" >Functions whose type is not expr must be defined before their use in a compiled function, since
the type of a function affects how it&#8217;s application will be treated by the compiler. The application
of a macro is replaced by the expansion of the macro. For functions whose type is
fexpr it is necessary to gather the unevaluated arguments into a list. Calling a function
which is an nexpr requires that the arguments be evaluated and gathered into a list.
When the compiler cannot determine the type of a function, because it has not been
defined, it assumes that the type of the function is expr. Note that it is not possible to
define a recursive function, whose type is not expr, without first defining a dummy
version.

<!--l. 138--><p class="noindent" ><table cellspacing="5"><tr><td class="clinks"><a 
href="allman1li14.html#allman1se60.html" >Up</a></td><td class="clinks"><a 
href="allman1se61.html" >Next</a></td><td class="clinks"><a 
href="allman1se59.html" >Prev</a></td><td class="clinks"><a 
href="allman1se59.html#tailallman1se59.html" >PrevTail</a></td><td class="clinks"><a 
href="allman1se60.html" >Front</a></td></tr></table><a 
 id="tailallman1se60.html"></a>   
</body></html> 
